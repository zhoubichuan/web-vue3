import{_ as a,o as l,c as p,b as s,a as e}from"./app.8390b8a1.js";const o={},c=e(`<h1 id="\u4E94-\u524D\u7AEF\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u4E94-\u524D\u7AEF\u6D4B\u8BD5" aria-hidden="true">#</a> \u4E94.\u524D\u7AEF\u6D4B\u8BD5</h1><div class="custom-container tip"><p class="custom-container-title">\u524D\u8A00</p><p>\u524D\u7AEF\u6D4B\u8BD5\u9700\u8981\u7528\u5230\u5DE5\u5177\uFF0C\u4EE5\u53CA\u6D4B\u8BD5\u76F8\u5173\u5DE5\u5177\u7528\u6CD5\uFF0C\u6D4B\u8BD5\u76F8\u5173\u573A\u666F</p></div><p>\u76D1\u542C\u6D4B\u8BD5\u7528\u4F8B\u8FD0\u884C,\u6BCF\u6B21\u4FEE\u6539\u6587\u4EF6\u4F1A\u81EA\u52A8\u91CD\u65B0\u8DD1\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u4E0D\u7528\u6BCF\u6B21\u624B\u52A8\u8DD1</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">yarn run </span><span style="color:#953800;">test</span><span style="color:#24292F;">:unit </span><span style="color:#CF222E;">--</span><span style="color:#24292F;">watch</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_1-unit" tabindex="-1"><a class="header-anchor" href="#_1-unit" aria-hidden="true">#</a> 1.unit</h2><p>\u6D4B\u8BD5 props \u4F20\u503C</p><ul><li>Test1.vue</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">h1</span><span style="color:#24292F;">&gt;{{ msg }}&lt;/</span><span style="color:#116329;">h1</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#953800;">props</span><span style="color:#24292F;">: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#953800;">msg</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">String</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>test1.spec.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">msg</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;new message&quot;</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">wrapper</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Test1, {</span></span>
<span class="line"><span style="color:#24292F;">  propsData: { msg },</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">text</span><span style="color:#24292F;">()).to.</span><span style="color:#8250DF;">include</span><span style="color:#24292F;">(msg)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u70B9\u51FB\u4E8B\u4EF6</p><p>Test2.vue</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;count&quot;</span><span style="color:#24292F;">&gt;{{ count }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">increment</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;\u70B9\u51FB&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> { count: </span><span style="color:#0550AE;">10</span><span style="color:#24292F;">};</span></span>
<span class="line"><span style="color:#24292F;">},</span></span>
<span class="line"><span style="color:#953800;">methods</span><span style="color:#24292F;">: {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">increment</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.count</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>test2.spec.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> wrapper </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Test2)</span></span>
<span class="line"><span style="color:#24292F;">wrapper.</span><span style="color:#8250DF;">setData</span><span style="color:#24292F;">({ count: </span><span style="color:#0550AE;">10</span><span style="color:#24292F;"> })</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;span&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">text</span><span style="color:#24292F;">()).to.be.</span><span style="color:#8250DF;">equal</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;10&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;button&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">trigger</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;click&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;span&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">text</span><span style="color:#24292F;">()).to.be.</span><span style="color:#8250DF;">equal</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;11&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u81EA\u5B9A\u4E49\u65B9\u6CD5</p><p>Test3.vue</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">Child</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">show</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">show</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;&lt;/</span><span style="color:#116329;">Child</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">p</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;content&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">flag</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;{{ name }}&lt;/</span><span style="color:#116329;">p</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#953800;">props</span><span style="color:#24292F;">:{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#953800;">fn</span><span style="color:#24292F;">:{}</span></span>
<span class="line"><span style="color:#24292F;">},</span></span>
<span class="line"><span style="color:#953800;">methods</span><span style="color:#24292F;">:{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">clickMe</span><span style="color:#24292F;">(){</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">fn</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;123&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">fn</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;456&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>test3.spec.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> wrapper </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Test3)</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;#content&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">exists</span><span style="color:#24292F;">()).to.be.false</span></span>
<span class="line"><span style="color:#24292F;">wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(Child).vm.</span><span style="color:#8250DF;">$emit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;show&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;#content&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">exists</span><span style="color:#24292F;">()).to.be.true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u5B50\u7EC4\u4EF6\u89E6\u53D1\u7236\u7EC4\u4EF6\u65B9\u6CD5</p><p>Child.vue</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">clickMe</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;click&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">tempalte</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Child </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./Child.vue&quot;</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">data</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {name: </span><span style="color:#0A3069;">&quot;javascript&quot;</span><span style="color:#24292F;">, flag: </span><span style="color:#0550AE;">false</span><span style="color:#24292F;"> };</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">show</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.flag </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">   </span><span style="color:#24292F;">components: {</span></span>
<span class="line"><span style="color:#24292F;">      Child</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#953800;">}</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#CF222E;">&lt;/</span><span style="color:#24292F;">script</span><span style="color:#CF222E;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>child.spec.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> callback </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> sinon.</span><span style="color:#8250DF;">spy</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> wrapper </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Child, {</span></span>
<span class="line"><span style="color:#24292F;">  propsData: { fn: callback },</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#24292F;">wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;button&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">trigger</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;click&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(callback.</span><span style="color:#8250DF;">getCall</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">).args[</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">]).to.be.</span><span style="color:#8250DF;">equal</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;123&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(callback.</span><span style="color:#8250DF;">getCall</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">).args[</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">]).to.be.</span><span style="color:#8250DF;">equal</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;456&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(callback.callCount).to.be.</span><span style="color:#8250DF;">equal</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5 axios</p><p>Test4.vue</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> &gt;{{user}}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">tempalte</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;">(){</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {user:</span><span style="color:#0A3069;">&#39;&#39;</span><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#24292F;">  },</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">mounted</span><span style="color:#24292F;">(){</span></span>
<span class="line"><span style="color:#24292F;">      axios.</span><span style="color:#8250DF;">get</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;/user&#39;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">then</span><span style="color:#24292F;">((</span><span style="color:#953800;">res</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.user </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> res.data.user;</span></span>
<span class="line"><span style="color:#24292F;">      }).</span><span style="color:#8250DF;">catch</span><span style="color:#24292F;">(</span><span style="color:#953800;">err</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">          console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(err);</span></span>
<span class="line"><span style="color:#24292F;">      });</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>test4.spec.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#8250DF;">beforeEach</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  moxios.</span><span style="color:#8250DF;">install</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#8250DF;">afterEach</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  moxios.</span><span style="color:#8250DF;">uninstall</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#8250DF;">it</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;\u6D4B\u8BD5axios&quot;</span><span style="color:#24292F;">, (</span><span style="color:#953800;">done</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> wrapper </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Test4)</span></span>
<span class="line"><span style="color:#24292F;">  moxios.</span><span style="color:#8250DF;">stubRequest</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;/user&quot;</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">    status: </span><span style="color:#0550AE;">200</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    response: { user: </span><span style="color:#0A3069;">&quot;jw&quot;</span><span style="color:#24292F;"> },</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">  moxios.</span><span style="color:#8250DF;">wait</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">text</span><span style="color:#24292F;">()).to.</span><span style="color:#8250DF;">include</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;jw&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">done</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5 vuex</p><p>Store.vue</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;{{ </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store.state.username }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">clickMe</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;\u70B9\u51FB&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#6E7781;">// \u6D4B\u8BD5vuex \u4ECE\u4E24\u4E2A\u65B9\u5411 \u6D4B\u8BD5ui \u6D4B\u8BD5\u529F\u80FD</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> { mapState, mapActions } </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">computed: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">...</span><span style="color:#8250DF;">mapState</span><span style="color:#24292F;">([</span><span style="color:#0A3069;">&quot;username&quot;</span><span style="color:#24292F;">]),</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">...</span><span style="color:#8250DF;">mapActions</span><span style="color:#24292F;">([</span><span style="color:#0A3069;">&quot;set_username&quot;</span><span style="color:#24292F;">]),</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">clickMe</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">[</span><span style="color:#0A3069;">&quot;set_username&quot;</span><span style="color:#24292F;">](</span><span style="color:#0A3069;">&quot;jw&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>store.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">state: {</span></span>
<span class="line"><span style="color:#24292F;">    username: </span><span style="color:#0A3069;">&quot;zfpx&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">mutations: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">set_username</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">, </span><span style="color:#953800;">username</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      state.username </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> username</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">actions: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">set_username</span><span style="color:#24292F;">({ </span><span style="color:#953800;">commit</span><span style="color:#24292F;"> }, </span><span style="color:#953800;">username</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;set_username&quot;</span><span style="color:#24292F;">, username)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>main.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> App </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./App.vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> router </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./router&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> config </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./store&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">Vue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex)</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> Vuex.</span><span style="color:#8250DF;">Store</span><span style="color:#24292F;">(config)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">Vue.config.productionTip </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">  router,</span></span>
<span class="line"><span style="color:#24292F;">  store,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(App),</span></span>
<span class="line"><span style="color:#24292F;">}).</span><span style="color:#8250DF;">$mount</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;#app&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>store.spec.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> { shallowMount, createLocalVue } </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;@vue/test-utils&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Store </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;@/components/Store.vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> localVue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">createLocalVue</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">localVue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex) </span><span style="color:#6E7781;">//\u9632\u6B62\u7528\u4F8B\u4E4B\u95F4\u7684\u6C61\u67D3</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> state</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> store</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> actions</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> callback </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> jest.</span><span style="color:#8250DF;">fn</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#8250DF;">describe</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;\u6D4B\u8BD5vuex \u80FD\u5426\u5728\u9875\u9762\u4E2D\u4F7F\u7528&quot;</span><span style="color:#24292F;">, () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> { username: </span><span style="color:#0A3069;">&quot;jw&quot;</span><span style="color:#24292F;"> }</span></span>
<span class="line"><span style="color:#24292F;">  actions </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    set_username: callback,</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">beforeEach</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> { username: </span><span style="color:#0A3069;">&quot;jw&quot;</span><span style="color:#24292F;"> }</span></span>
<span class="line"><span style="color:#24292F;">    store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> Vuex.</span><span style="color:#8250DF;">Store</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      state,</span></span>
<span class="line"><span style="color:#24292F;">      actions,</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">it</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;state\u80FD\u5426\u6B63\u5E38\u663E\u793A\u5230\u9875\u9762\u4E2D&quot;</span><span style="color:#24292F;">, () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> wrapper </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Store, {</span></span>
<span class="line"><span style="color:#24292F;">      localVue,</span></span>
<span class="line"><span style="color:#24292F;">      store,</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(wrapper.</span><span style="color:#8250DF;">text</span><span style="color:#24292F;">()).</span><span style="color:#8250DF;">toContain</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;jw&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">it</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;\u70B9\u51FB\u6309\u94AE\u65F6action\u80FD\u5426\u6B63\u5E38\u89E6\u53D1&quot;</span><span style="color:#24292F;">, () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> wrapper </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">shallowMount</span><span style="color:#24292F;">(Store, {</span></span>
<span class="line"><span style="color:#24292F;">      localVue, </span><span style="color:#6E7781;">//\u63D0\u4F9B\u6D4B\u8BD5\u7684\u6784\u9020\u51FD\u6570vue</span></span>
<span class="line"><span style="color:#24292F;">      store,</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    wrapper.</span><span style="color:#8250DF;">find</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;button&quot;</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">trigger</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;click&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(callback).</span><span style="color:#8250DF;">toHaveBeenCalled</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06 store \u4E2D\u7684\u90E8\u5206\u5185\u5BB9\u653E\u5230 main.js \u4E2D\u53EF\u4EE5\u6539\u9020\u5F97\u66F4\u7B80\u6D01</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> { createLocalVue } </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;@vue/test-utils&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> config </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;@/store&quot;</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> localVue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">createLocalVue</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">localVue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex) </span><span style="color:#6E7781;">//\u9632\u6B62\u7528\u4F8B\u4E4B\u95F4\u7684\u6C61\u67D3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8250DF;">describe</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;\u6D4B\u8BD5vuex \u80FD\u5426\u5728\u9875\u9762\u4E2D\u4F7F\u7528&quot;</span><span style="color:#24292F;">, () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> store</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">beforeEach</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> Vuex.</span><span style="color:#8250DF;">Store</span><span style="color:#24292F;">(config)</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">it</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;state\u80FD\u5426\u6B63\u5E38\u663E\u793A\u5230\u9875\u9762\u4E2D&quot;</span><span style="color:#24292F;">, () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(store.state.username).</span><span style="color:#8250DF;">toBe</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;zfpx&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    jest.</span><span style="color:#8250DF;">useFakeTimers</span><span style="color:#24292F;">() </span><span style="color:#6E7781;">//\u521B\u5EFA\u4E00\u4E2A\u6A21\u62DF\u7684\u5B9A\u65F6\u5668\uFF0C\u4F1A\u628A\u5F02\u6B65\u4EE3\u7801\u7ACB\u523B\u8FD4\u56DE</span></span>
<span class="line"><span style="color:#24292F;">    store.</span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;set_username&quot;</span><span style="color:#24292F;">, </span><span style="color:#0A3069;">&quot;newName&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    jest.</span><span style="color:#8250DF;">runAllTimers</span><span style="color:#24292F;">() </span><span style="color:#6E7781;">//\u628Atimer\u6267\u884C</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">expect</span><span style="color:#24292F;">(store.state.username).</span><span style="color:#8250DF;">toBe</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;newName&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    jest.</span><span style="color:#8250DF;">useRealTimers</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-e2e" tabindex="-1"><a class="header-anchor" href="#_2-e2e" aria-hidden="true">#</a> 2.e2e</h2>`,47),t=["href"],r=["href"];function i(n,y){return l(),p("div",null,[c,s("p",null,[s("kbd",null,[s("a",{href:n.$withBase("/vue-test1.zip"),download:"vue-test1.zip"},"mocha + chai",8,t)]),s("kbd",null,[s("a",{href:n.$withBase("/vue-test2.zip"),download:"vue-test2.zip"},"jest",8,r)])])])}const F=a(o,[["render",i],["__file","5.test.html.vue"]]);export{F as default};
