import{_ as s,o as n,c as a,a as l}from"./app.8390b8a1.js";const p={},e=l(`<h1 id="\u4E8C-state-\u7684-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u4E8C-state-\u7684-\u4F7F\u7528" aria-hidden="true">#</a> \u4E8C.state \u7684 \u4F7F\u7528</h1><ul><li>1.\u65B0\u5EFA store.js \u6587\u4EF6</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#24292F;">Vue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex)</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#24292F;">Vuex</span><span style="color:#953800;">.</span><span style="color:#8250DF;">Store</span><span style="color:#953800;">({</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">state: {</span></span>
<span class="line"><span style="color:#24292F;">    count: </span><span style="color:#0550AE;">100</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>2.\u5728 main.js \u4E2D\u6DFB\u52A0 store</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> App </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./App.vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> store </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./store&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">Vue.config.productionTip </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">  store,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(App),</span></span>
<span class="line"><span style="color:#24292F;">}).</span><span style="color:#8250DF;">$mount</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;#app&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>3.\u5728 App.vue \u4E2D\u4F7F\u7528 store \u4E2D\u5B9A\u4E49\u7684 count \u53D8\u91CF</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#CF222E;">=</span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.state.count}}</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">export default {</span></span>
<span class="line"><span style="color:#24292F;">  name: </span><span style="color:#0A3069;">&quot;app&quot;</span></span>
<span class="line"><span style="color:#24292F;">};</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6253\u5F00\u6D4F\u89C8\u5668\u9875\u9762\u51FA\u73B0\u5B9A\u4E49\u7684\u53D8\u91CF\uFF1A100</li></ul><h3 id="_2-state-\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_2-state-\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 2.state \u7684\u5B9E\u73B0</h3><ul><li>1.\u5728 store.js \u4E2D\u65B0\u5EFA vuex.js \u6587\u4EF6<code>Vue.use(Vuex);</code>\u4F1A\u8C03\u7528 Vuex \u4E2D\u7684<code>install</code>\u65B9\u6CD5,\u58F0\u660E\u4E00\u4E2A\u53D8\u91CF<code>Vue</code>,\u4FDD\u7559\u7528\u6237\u7684\u6784\u9020\u51FD\u6570</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> Vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">install</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">_Vue</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  Vue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _Vue</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">Store</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">install</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>2.\u6DF7\u5408<code>mixin</code>,\u53EF\u4EE5\u7ED9\u6240\u6709\u7684\u5B9E\u5217\u6DF7\u5408\u4E9B\u4E1C\u897F\uFF0C<code>beforeCreate</code>\u6240\u6709\u7684\u7EC4\u4EF6\u521B\u5EFA\u4E4B\u524D\u90FD\u53EF\u4EE5\u8C03\u7528</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> Vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">install</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">_Vue</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  Vue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _Vue</span></span>
<span class="line"><span style="color:#24292F;">  Vue.</span><span style="color:#8250DF;">mixin</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">beforeCreate</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;aaa&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">Store</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">install</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8C03\u7528\u4E24\u6B21\uFF0C\u7B2C\u4E00\u6B21\u662F main.js \u8C03\u7528\uFF0C\u7B2C\u4E8C\u6B21\u662F App.vue \u7EC4\u4EF6\u8C03\u7528</p><ul><li>3.\u6211\u4EEC\u9700\u8981\u628A\u6839\u7EC4\u4EF6\u4E2D store \u5B9E\u5217\u7ED9\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u589E\u52A0\u4E00\u4E2A<code>$store</code></li></ul><p>\u5728 vuex.js \u4E2D</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#8250DF;">beforeCreate</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store;</span></span>
<span class="line"><span style="color:#24292F;">  } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent.$store;</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>\u5148\u5224\u65AD\u662F\u5426\u662F\u6839\u7EC4\u4EF6\uFF0C\u7136\u540E\u5B50\u7EC4\u4EF6\u6839\u636E\u7236\u7EC4\u4EF6\u7684 store \u62FF\u5230 store</p></li><li><p>4.\u7EC4\u4EF6\u4E2D\u8C03\u7528\u81EA\u5DF1\u5199\u7684 vuex \u65B9\u6CD5\uFF0C\u770B\u662F\u5426\u6709 store</p></li></ul><p>\u5728 App.js \u4E2D</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#CF222E;">=</span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;!-- {{this.$store.state.count}} --&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">export default {</span></span>
<span class="line"><span style="color:#24292F;">  name: </span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">mounted</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    console.log(this.$store);</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">};</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>\u6253\u5F00\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u663E\u793A\uFF1AStore\xA0{}</p></li><li><p>5.\u83B7\u53D6 state \u4E2D\u7684\u503C</p></li><li><p>\u7EC4\u4EF6\u4E2D\u7684 Store \u662F\u4ECE vuex \u4E2D new \u51FA\u6765\u7684<code>new Vuex.Store</code></p></li></ul><ul><li>Store \u7C7B\u4E2D\u6709 <code>state</code> <code>getters</code> <code>mutations</code> <code>actions</code> \u7B49\u5C5E\u6027\uFF0C\u53EF\u4EE5\u901A\u8FC7 <code>state</code> \u5C5E\u6027\u62FF\u5230 <code>state</code> \u4E2D\u7684\u503C</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> Vue</span></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">(</span><span style="color:#953800;">options</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.state</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      data: {</span></span>
<span class="line"><span style="color:#24292F;">        state,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">get</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">state</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm.state</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">install</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">_Vue</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  Vue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _Vue</span></span>
<span class="line"><span style="color:#24292F;">  Vue.</span><span style="color:#8250DF;">mixin</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">beforeCreate</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store</span></span>
<span class="line"><span style="color:#24292F;">      } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent.$store</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">Store</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">install</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4EC0\u4E48\u6837\u7684\u5C5E\u6027\u53EF\u4EE5\u5B9E\u73B0\u53CC\u5411\u6570\u636E\u7ED1\u5B9A \u6709<code>get</code>\u548C<code>set</code>\u5982\uFF0C<code>new vue({data:{}})</code></li></ul><ul><li>\u67E5\u770B\u6D4F\u89C8\u5668\uFF1A100</li></ul><h3 id="_3-getters-\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_3-getters-\u7684\u4F7F\u7528" aria-hidden="true">#</a> 3.getters \u7684\u4F7F\u7528</h3><ul><li>1.getter \u7684\u4F7F\u7528</li></ul><p>sotre.js \u4E2D</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#24292F;">Vue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex)</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#24292F;">Vuex</span><span style="color:#953800;">.</span><span style="color:#8250DF;">Store</span><span style="color:#953800;">({</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">state: {</span></span>
<span class="line"><span style="color:#24292F;">    count: </span><span style="color:#0550AE;">100</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">getters: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">newCount</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> state.count </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">100</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>App.vue \u4E2D</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#CF222E;">=</span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.state.count}}</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.getters.newCount}}</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">export default {</span></span>
<span class="line"><span style="color:#24292F;">  name: </span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">mounted</span><span style="color:#24292F;">() {}</span></span>
<span class="line"><span style="color:#24292F;">};</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6D4F\u89C8\u5668\u9875\u9762\u663E\u793A\uFF1A100 200</li></ul><h3 id="_4-getters-\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-getters-\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 4. getters \u7684\u5B9E\u73B0</h3><ul><li>1.\u5C06 options \u4E2D\u7684 getters \u62FF\u51FA\u6765\u904D\u5386\u8FD9\u4E2A\u5BF9\u8C61\uFF0C\u5C06\u503C\u8FD4\u56DE</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> Vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">(</span><span style="color:#953800;">options</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.state</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      data: {</span></span>
<span class="line"><span style="color:#24292F;">        state,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (options.getters) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.getters</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(getters, (</span><span style="color:#953800;">getterName</span><span style="color:#24292F;">, </span><span style="color:#953800;">getterFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">defineProperty</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters, getterName, {</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">get</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getterFn</span><span style="color:#24292F;">(state)</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        })</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">get</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">state</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm.state</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">function</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(</span><span style="color:#953800;">obj</span><span style="color:#24292F;">, </span><span style="color:#953800;">callback</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">keys</span><span style="color:#24292F;">(obj).</span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">((</span><span style="color:#953800;">item</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">callback</span><span style="color:#24292F;">(item, obj[item]))</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">install</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">_Vue</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  Vue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _Vue</span></span>
<span class="line"><span style="color:#24292F;">  Vue.</span><span style="color:#8250DF;">mixin</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">beforeCreate</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store</span></span>
<span class="line"><span style="color:#24292F;">      } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent.$store</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">Store</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">install</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u9875\u9762\u51FA\u73B0\uFF1A100 200</li></ul><h3 id="_5-mutations-\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_5-mutations-\u7684\u4F7F\u7528" aria-hidden="true">#</a> 5.mutations \u7684\u4F7F\u7528</h3><ul><li>1.mutations \u7684\u7528\u6CD5</li></ul><p>store.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#24292F;">Vue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex)</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#24292F;">Vuex</span><span style="color:#953800;">.</span><span style="color:#8250DF;">Store</span><span style="color:#953800;">({</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">state: {</span></span>
<span class="line"><span style="color:#24292F;">    count: </span><span style="color:#0550AE;">100</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">getters: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">newCount</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> state.count </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">100</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">mutations: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">change</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      state.count </span><span style="color:#CF222E;">+=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">10</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>App.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#CF222E;">=</span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.state.count}}</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.getters.newCount}}</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> </span><span style="color:#82071E;font-style:italic;">@click=&quot;change&quot;&gt;add&lt;/button&gt;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#82071E;font-style:italic;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#0550AE;">export</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">default</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  name: </span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">mounted</span><span style="color:#24292F;">() {},</span></span>
<span class="line"><span style="color:#24292F;">  methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">change</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store.</span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;change&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span><span style="color:#82071E;font-style:italic;">;</span></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;style&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u70B9\u51FB\u6309\u94AE\u9875\u9762\u6570\u5B57\u52A0 10</li></ul><h3 id="_6-mutations-\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-mutations-\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 6. mutations \u7684\u5B9E\u73B0</h3><p>Vuex.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">(</span><span style="color:#953800;">options</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.state</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      data: {</span></span>
<span class="line"><span style="color:#24292F;">        state,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (options.getters) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.getters</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(getters, (</span><span style="color:#953800;">getterName</span><span style="color:#24292F;">, </span><span style="color:#953800;">getterFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">defineProperty</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters, getterName, {</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">get</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getterFn</span><span style="color:#24292F;">(state)</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        })</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> mutations </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.mutations</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(mutations, (</span><span style="color:#953800;">mutationName</span><span style="color:#24292F;">, </span><span style="color:#953800;">mutationFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations[mutationName] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        mutationFn.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, state)</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">get</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">state</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm.state</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#953800;">type</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations[type]()</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5237\u65B0\u6D4F\u89C8\u5668\u9875\u9762\u6570\u5B57\u52A0 10</li></ul><h3 id="_7-actions-\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_7-actions-\u7684\u4F7F\u7528" aria-hidden="true">#</a> 7.actions \u7684\u4F7F\u7528</h3><ul><li>1.action \u7684\u7528\u6CD5\uFF08\u5F02\u6B65\u65B9\u6CD5\uFF09</li></ul><p>store.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#953800;">actions</span><span style="color:#24292F;">: {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">change</span><span style="color:#24292F;">({ commit }) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">setTimeout</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;change&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">    }, </span><span style="color:#0550AE;">1000</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>App.js</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292f;">change() {</span></span>
<span class="line"><span style="color:#24292f;">  this.$store.dispatch(&quot;change&quot;);</span></span>
<span class="line"><span style="color:#24292f;">}</span></span>
<span class="line"><span style="color:#24292f;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u70B9\u51FB\u6D4F\u89C8\u5668\u6309\u94AE 1 \u79D2\u540E\u52A0 10</li></ul><h3 id="_8-actions-\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_8-actions-\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 8.actions \u7684\u5B9E\u73B0</h3><p>store.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">(</span><span style="color:#953800;">options</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.state</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      data: {</span></span>
<span class="line"><span style="color:#24292F;">        state,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (options.getters) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.getters</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(getters, (</span><span style="color:#953800;">getterName</span><span style="color:#24292F;">, </span><span style="color:#953800;">getterFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">defineProperty</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters, getterName, {</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">get</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getterFn</span><span style="color:#24292F;">(state)</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        })</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> mutations </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.mutations</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(mutations, (</span><span style="color:#953800;">mutationName</span><span style="color:#24292F;">, </span><span style="color:#953800;">mutationFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations[mutationName] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        mutationFn.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, state)</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> actions </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.actions</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(actions, (</span><span style="color:#953800;">actionName</span><span style="color:#24292F;">, </span><span style="color:#953800;">actionFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions[actionName] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        actionFn.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> { commit, dispatch } </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">commit</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">type</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      commit.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, type)</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">type</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      dispatch.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, type)</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">get</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">state</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm.state</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#953800;">type</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations[type]()</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;">(</span><span style="color:#953800;">type</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions[type]()</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6253\u5F00\u6D4F\u89C8\u5668\u70B9\u51FB\u6309\u94AE\u6570\u636E\u52A0 10</li></ul><h3 id="_9-modules-\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_9-modules-\u7684\u4F7F\u7528" aria-hidden="true">#</a> 9.modules \u7684\u4F7F\u7528</h3><p>store.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vuex </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vuex&quot;</span></span>
<span class="line"><span style="color:#24292F;">Vue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(Vuex)</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#24292F;">Vuex</span><span style="color:#953800;">.</span><span style="color:#8250DF;">Store</span><span style="color:#953800;">({</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">modules: {</span></span>
<span class="line"><span style="color:#24292F;">    a: {</span></span>
<span class="line"><span style="color:#24292F;">      state: {</span></span>
<span class="line"><span style="color:#24292F;">        count: </span><span style="color:#0550AE;">200</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      modules: {</span></span>
<span class="line"><span style="color:#24292F;">        b: {</span></span>
<span class="line"><span style="color:#24292F;">          state: {</span></span>
<span class="line"><span style="color:#24292F;">            count: </span><span style="color:#0550AE;">300</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">state: {</span></span>
<span class="line"><span style="color:#24292F;">    count: </span><span style="color:#0550AE;">100</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">getters: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">newCount</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> state.count </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">100</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">mutations: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">change</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      state.count </span><span style="color:#CF222E;">+=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">10</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">actions: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">change</span><span style="color:#24292F;">({ </span><span style="color:#953800;">commit</span><span style="color:#24292F;"> }) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">setTimeout</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;change&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">      }, </span><span style="color:#0550AE;">1000</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>App.vue</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#CF222E;">=</span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.state.count}}</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.getters.newCount}}</span></span>
<span class="line"><span style="color:#24292F;">    {{this.$store.state.a.b.count}}</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> </span><span style="color:#82071E;font-style:italic;">@click=&quot;change&quot;&gt;add&lt;/button&gt;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#82071E;font-style:italic;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#0550AE;">export</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">default</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  name: </span><span style="color:#0A3069;">&quot;app&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">mounted</span><span style="color:#24292F;">() {},</span></span>
<span class="line"><span style="color:#24292F;">  methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">change</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store.</span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;change&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span><span style="color:#82071E;font-style:italic;">;</span></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;style&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82071E;font-style:italic;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6253\u5F00\u6D4F\u89C8\u5668\u4F1A\u6709 300 \u663E\u793A\u51FA\u6765</li></ul><h3 id="_10-modules-\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_10-modules-\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 10.modules \u7684\u5B9E\u73B0</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> Vue</span></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">ModuleCollection</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u9ED8\u8BA4actions mutation \u90FD\u4F1A\u5B9A\u4E49\u5230store\u4E0A\u9762</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">(</span><span style="color:#953800;">options</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// vuex [a]</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">register</span><span style="color:#24292F;">([], options)</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">register</span><span style="color:#24292F;">(</span><span style="color:#953800;">path</span><span style="color:#24292F;">, </span><span style="color:#953800;">rawModule</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// path \u662F\u4E2A\u7A7A\u6570\u7EC4 rawModule\u5C31\u662F\u4E2A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> newModule </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      _raw: rawModule, </span><span style="color:#6E7781;">// \u5BF9\u8C61 \u5F53\u524D \u6709state getters \u90A3\u4E2A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#24292F;">      _children: {}, </span><span style="color:#6E7781;">// \u8868\u793A \u4ED6\u5305\u542B\u7684\u6A21\u5757</span></span>
<span class="line"><span style="color:#24292F;">      state: rawModule.state, </span><span style="color:#6E7781;">// \u81EA\u5DF1\u6A21\u5757\u7684\u72B6\u6001</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (path.</span><span style="color:#0550AE;">length</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">==</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.root </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> newModule </span><span style="color:#6E7781;">// \u6839</span></span>
<span class="line"><span style="color:#24292F;">    } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// [a,b];  // reduce\u65B9\u6CD5 {{a.b.c}}</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> parent </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> path.</span><span style="color:#8250DF;">slice</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">reduce</span><span style="color:#24292F;">((</span><span style="color:#953800;">root</span><span style="color:#24292F;">, </span><span style="color:#953800;">current</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> root._children[current]</span></span>
<span class="line"><span style="color:#24292F;">      }, </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.root)</span></span>
<span class="line"><span style="color:#24292F;">      parent._children[path[path.</span><span style="color:#0550AE;">length</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">]] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> newModule</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (rawModule.modules) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// \u6709\u5B50\u6A21\u5757</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(rawModule.modules, (</span><span style="color:#953800;">childName</span><span style="color:#24292F;">, </span><span style="color:#953800;">module</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// [a,b];</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// [a,d]</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">register</span><span style="color:#24292F;">(path.</span><span style="color:#8250DF;">concat</span><span style="color:#24292F;">(childName), </span><span style="color:#0550AE;">module</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#6E7781;">// vuex \u4E2D\u95F4\u4EF6  \u53EF\u4EE5\u5C01\u88C5\u81EA\u5DF1\u7684\u903B\u8F91  subscirbe registerModule unregisterModule</span></span>
<span class="line"><span style="color:#CF222E;">function</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">installModule</span><span style="color:#24292F;">(</span><span style="color:#953800;">store</span><span style="color:#24292F;">, </span><span style="color:#953800;">rootState</span><span style="color:#24292F;">, </span><span style="color:#953800;">path</span><span style="color:#24292F;">, </span><span style="color:#953800;">rootModule</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// rootState.a = {count:200}</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// rootState.a.b = {count:3000}</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (path.</span><span style="color:#0550AE;">length</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&gt;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// [a,b]</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u7B2C\u4E8C\u6B21 \u83B7\u53D6\u5230\u7684\u5C31\u662Fa\u5BF9\u5E94\u7684\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> parent </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> path.</span><span style="color:#8250DF;">slice</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">).</span><span style="color:#8250DF;">reduce</span><span style="color:#24292F;">((</span><span style="color:#953800;">root</span><span style="color:#24292F;">, </span><span style="color:#953800;">current</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> root[current]</span></span>
<span class="line"><span style="color:#24292F;">    }, rootState)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// {count:1000,a:{}}</span></span>
<span class="line"><span style="color:#24292F;">    Vue.</span><span style="color:#8250DF;">set</span><span style="color:#24292F;">(parent, path[path.</span><span style="color:#0550AE;">length</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">], rootModule.state)</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (rootModule._raw.getters) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(rootModule._raw.getters, (</span><span style="color:#953800;">getterName</span><span style="color:#24292F;">, </span><span style="color:#953800;">getterFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">defineProperty</span><span style="color:#24292F;">(store.getters, getterName, {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#8250DF;">get</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getterFn</span><span style="color:#24292F;">(rootModule.state)</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (rootModule._raw.actions) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(rootModule._raw.actions, (</span><span style="color:#953800;">actionName</span><span style="color:#24292F;">, </span><span style="color:#953800;">actionFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> entry </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> store.actions[actionName] </span><span style="color:#CF222E;">||</span><span style="color:#24292F;"> (store.actions[actionName] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [])</span></span>
<span class="line"><span style="color:#24292F;">      entry.</span><span style="color:#8250DF;">push</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        actionFn.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(store, store)</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (rootModule._raw.mutations) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(rootModule._raw.mutations, (</span><span style="color:#953800;">mutationName</span><span style="color:#24292F;">, </span><span style="color:#953800;">mutationFn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> entry </span><span style="color:#CF222E;">=</span></span>
<span class="line"><span style="color:#24292F;">        store.mutations[mutationName] </span><span style="color:#CF222E;">||</span><span style="color:#24292F;"> (store.mutations[mutationName] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [])</span></span>
<span class="line"><span style="color:#24292F;">      entry.</span><span style="color:#8250DF;">push</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        mutationFn.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(store, rootModule.state)</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(rootModule._children, (</span><span style="color:#953800;">childName</span><span style="color:#24292F;">, </span><span style="color:#953800;">module</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">installModule</span><span style="color:#24292F;">(store, rootState, path.</span><span style="color:#8250DF;">concat</span><span style="color:#24292F;">(childName), </span><span style="color:#0550AE;">module</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">Store</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// state getters mutations actions</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">(</span><span style="color:#953800;">options</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> state </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> options.state </span><span style="color:#6E7781;">// {count:200}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.getters </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u4EC0\u4E48\u6837\u7684\u5C5E\u6027 \u53EF\u4EE5\u5B9E\u73B0\u53CC\u5411 \u6709get \u548Cset new vue({data:{}})</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// vuex\u6838\u5FC3\u5C31\u662F\u501F\u7528\u4E86vue\u7684\u5B9E\u4F8B \u56E0\u4E3Avue\u7684\u5B9E\u4F8B\u6570\u636E\u53D8\u5316 \u4F1A\u5237\u65B0\u89C6\u56FE</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      data: {</span></span>
<span class="line"><span style="color:#24292F;">        state,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u628A\u6A21\u5757\u76F4\u63A5\u7684\u5173\u7CFB\u8FDB\u884C\u6574\u7406  \u81EA\u5DF1\u6839\u636E\u7528\u6237\u4F20\u5165\u7684\u53C2\u6570\u7EF4\u62A4\u4E86\u4E00\u4E2A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// root._children=&gt;a._children=&gt;b</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.modules </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">ModuleCollection</span><span style="color:#24292F;">(options)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">//  \u65E0\u8BBA\u662F\u5B50\u6A21\u5757 \u8FD8\u662F\u5B59\u5B50 \u6240\u6709\u7684mutation \u90FD\u662F\u6839\u4E0A\u7684</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// this\u662Fstore\u7684\u5B9E\u4F8B [] path this.mdoue.root \u5F53\u524D\u7684\u6839\u6A21\u5757</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">installModule</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, state, [], </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.modules.root) </span><span style="color:#6E7781;">// {_raw,_children,state}</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> { commit, dispatch } </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">commit</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">type</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      commit.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, type)</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">type</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      dispatch.</span><span style="color:#8250DF;">call</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">, type)</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">get</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">state</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// Object.definefineProperty get</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">._vm.state</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#953800;">type</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// undefine</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.mutations[type].</span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">((</span><span style="color:#953800;">fn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">fn</span><span style="color:#24292F;">())</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;">(</span><span style="color:#953800;">type</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.actions[type].</span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">((</span><span style="color:#953800;">fn</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">fn</span><span style="color:#24292F;">())</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">function</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">(</span><span style="color:#953800;">obj</span><span style="color:#24292F;">, </span><span style="color:#953800;">callback</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">keys</span><span style="color:#24292F;">(obj).</span><span style="color:#8250DF;">forEach</span><span style="color:#24292F;">((</span><span style="color:#953800;">item</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">callback</span><span style="color:#24292F;">(item, obj[item]))</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">install</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">_Vue</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  Vue </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _Vue </span><span style="color:#6E7781;">// \u4FDD\u7559vue\u7684\u6784\u9020\u51FD\u6570</span></span>
<span class="line"><span style="color:#24292F;">  Vue.</span><span style="color:#8250DF;">mixin</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">beforeCreate</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// \u6211\u9700\u8981\u628A\u6839\u7EC4\u4EF6\u4E2D store\u5B9E\u4F8B \u7ED9\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u589E\u52A0\u4E00\u4E2A$store\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// \u662F\u5426\u662F\u6839\u7EC4\u4EF6</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">debugger</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$options.store</span></span>
<span class="line"><span style="color:#24292F;">      } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// \u5B50\u7EC4\u4EF6 \u6DF1\u5EA6\u4F18\u5148 \u7236\uFF0D&gt; \u5B50 \uFF0D&gt; \u5B59\u5B50</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$store </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent </span><span style="color:#CF222E;">&amp;&amp;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$parent.$store</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">Store</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">install</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,66),o=[e];function c(t,r){return n(),a("div",null,o)}const y=s(p,[["render",c],["__file","3.origin.html.vue"]]);export{y as default};
