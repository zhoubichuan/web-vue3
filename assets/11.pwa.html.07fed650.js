import{_ as s,o as n,c as a,a as l}from"./app.8390b8a1.js";const e={},o=l(`<h1 id="\u5341\u4E00-pwa" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E00-pwa" aria-hidden="true">#</a> \u5341\u4E00.PWA</h1><div class="custom-container tip"><p class="custom-container-title">\u524D\u8A00</p><p>\u5728 vue \u9879\u76EE\u4E2D PWA \u7684\u5E94\u7528\u573A\u666F\uFF0C\u4EE5\u53CA pwa \u7684\u7528\u6CD5\u4EE5\u53CA\u6CE8\u610F\u4E8B\u9879</p></div><h2 id="_1-manifest-json" tabindex="-1"><a class="header-anchor" href="#_1-manifest-json" aria-hidden="true">#</a> 1.manifest.json</h2><div class="language-json ext-json line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;name&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;wc--movies&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// \u5BFC\u822A\u663E\u793A\u7684\u540D\u5B57</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;short_name&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;wc&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// app\u7684\u540D\u5B57</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;start_url&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;.&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;icon&quot;</span><span style="color:#24292F;">: [</span></span>
<span class="line"><span style="color:#24292F;">    {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// app\u56FE\u6807\uFF0C\u4F1A\u6839\u636E\u4E0D\u4E00\u6837\u7684\u7CFB\u7EDF\u8FDB\u884C\u9002\u914D</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">&quot;src&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;/public/img/icons/android-chrome-128x128.png&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">&quot;sizes&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;128x128&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">&quot;type&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;image/png&quot;</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">&quot;src&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;/public/img/icons/android-chrome-192x192.png&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// \u5927\u5C0F</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">&quot;sizes&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;192x192&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// \u683C\u5F0F</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">&quot;type&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;image/png&quot;</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  ], </span><span style="color:#6E7781;">//\u5BFC\u822A\u754C\u9762\u7684\u80CC\u666F\u989C\u8272</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;background_color&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;white&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">//\u624B\u673A\u6700\u4E0A\u65B9\u663E\u793A\u8FD0\u8425\u5546\u53CA\u7535\u91CF\u3001\u65F6\u95F4\u7B49\u8FD9\u4E00\u680F\u7684\u989C\u8272</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;theme_color&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;white&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">//\u9875\u9762\u663E\u793A\u6548\u679C\u4E3A\u6CA1\u6709\u5730\u5740\u680F\u548C\u5E95\u90E8\u72B6\u6001\u680F</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">&quot;display&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;standalone&quot;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-index-html-\u4E2D" tabindex="-1"><a class="header-anchor" href="#_2-index-html-\u4E2D" aria-hidden="true">#</a> 2.index.html \u4E2D</h2><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">link</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">rel</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;manifest&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">href</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;/manifest.json&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-registerserviceworker-js" tabindex="-1"><a class="header-anchor" href="#_3-registerserviceworker-js" aria-hidden="true">#</a> 3.registerServiceWorker.js</h2><p>https \u73AF\u5883\u4E0B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> { register } </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;register-service-worker&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (p<wbr>rocess.env.</span><span style="color:#0550AE;">NODE_ENV</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;production&quot;</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">register</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">\`\${</span><span style="color:#24292F;">process</span><span style="color:#0A3069;">.</span><span style="color:#24292F;">env</span><span style="color:#0A3069;">.</span><span style="color:#0550AE;">BASE_URL</span><span style="color:#0A3069;">}service-worker.js\`</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">ready</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0A3069;">&quot;App is being served from cache by a service worker.</span><span style="color:#0550AE;">\\n</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">+</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0A3069;">&quot;For more details, visit https://goo.gl/AFskqB&quot;</span></span>
<span class="line"><span style="color:#24292F;">      )</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">registered</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;Service worker has been registered.&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">cached</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;Content has been cached for offline use.&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">updatefound</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;New content is downloading.&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">updated</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;New content is available; please refresh.&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">offline</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">log</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0A3069;">&quot;No internet connection found. App is running in offline mode.&quot;</span></span>
<span class="line"><span style="color:#24292F;">      )</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">error</span><span style="color:#24292F;">(</span><span style="color:#953800;">error</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      console.</span><span style="color:#8250DF;">error</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;Error during service worker registration:&quot;</span><span style="color:#24292F;">, error)</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-vue-config-js" tabindex="-1"><a class="header-anchor" href="#_4-vue-config-js" aria-hidden="true">#</a> 4.vue.config.js</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#953800;">pwa</span><span style="color:#24292F;">: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#953800;">workboxPluginMode</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&#39;GenerateSW&#39;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// \u4E5F\u53EF\u4EE5\u5B9A\u4E49\u4E3A\u2018InjectManifest\u2019\u6A21\u5F0F\u3002\u4F46\u662F\u9700\u81EA\u5DF1\u5199SW.js\u6587\u4EF6\u8FDB\u884C\u914D\u7F6E</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#953800;">workboxOptions</span><span style="color:#24292F;">: {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#953800;">importWorkboxFrom</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&#39;cdn&#39;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">//\u4ECE&#39;&#39;cdn&quot;\u5BFC\u5165workbox,\u4E5F\u53EF\u4EE5\u2018local\u2019</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#953800;">skipWaiting</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// \u5B89\u88C5\u5B8CSW\u4E0D\u7B49\u5F85\u76F4\u63A5\u63A5\u7BA1\u7F51\u7AD9</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#953800;">clientsClaim</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#953800;">navigateFallback</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&#39;/index.html&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#953800;">exclude</span><span style="color:#24292F;">: [</span><span style="color:#0A3069;">/</span><span style="color:#116329;font-weight:bold;">\\.</span><span style="color:#0A3069;">(?:png</span><span style="color:#CF222E;">|</span><span style="color:#0A3069;">jpg</span><span style="color:#CF222E;">|</span><span style="color:#0A3069;">jpeg</span><span style="color:#CF222E;">|</span><span style="color:#0A3069;">svg)</span><span style="color:#CF222E;">$</span><span style="color:#0A3069;">/</span><span style="color:#24292F;">], </span><span style="color:#6E7781;">//\u5728\u9884\u7F13\u5B58\u4E2D\u6392\u9664\u56FE\u7247</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// \u5B9A\u4E49\u8FD0\u884C\u65F6\u7F13\u5B58</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#953800;">runtimeCaching</span><span style="color:#24292F;">: [</span></span>
<span class="line"><span style="color:#24292F;">            {</span></span>
<span class="line"><span style="color:#24292F;">                urlPattern: </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">RegExp</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;^https://cdn&#39;</span><span style="color:#24292F;">),</span></span>
<span class="line"><span style="color:#24292F;">                handler: </span><span style="color:#0A3069;">&#39;NetworkFirst&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">                options: {</span></span>
<span class="line"><span style="color:#24292F;">                    networkTimeoutSeconds: </span><span style="color:#0550AE;">20</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">                    cacheName: </span><span style="color:#0A3069;">&#39;cdn-cache&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">                    cacheableResponse: {</span></span>
<span class="line"><span style="color:#24292F;">                        statuses: [</span><span style="color:#0550AE;">200</span><span style="color:#24292F;">]</span></span>
<span class="line"><span style="color:#24292F;">                    }</span></span>
<span class="line"><span style="color:#24292F;">                }</span></span>
<span class="line"><span style="color:#24292F;">            }</span></span>
<span class="line"><span style="color:#24292F;">        ]</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),p=[o];function c(r,i){return n(),a("div",null,p)}const y=s(e,[["render",c],["__file","11.pwa.html.vue"]]);export{y as default};
