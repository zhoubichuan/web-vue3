import{_ as s,o as n,c as a,a as l}from"./app.8390b8a1.js";const p="/web-vue3/assets/1.singlespa.7773e787.png",e={},o=l(`<h1 id="\u4E00-singlespa-\u7528\u6CD5\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#\u4E00-singlespa-\u7528\u6CD5\u89E3\u6790" aria-hidden="true">#</a> \u4E00.singlespa\uFF08\u7528\u6CD5\u89E3\u6790\uFF09</h1><h2 id="_1-\u6784\u5EFA\u5B50\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#_1-\u6784\u5EFA\u5B50\u5E94\u7528" aria-hidden="true">#</a> 1.\u6784\u5EFA\u5B50\u5E94\u7528</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">vue create spa-vue</span></span>
<span class="line"><span style="color:#24292F;">npm install single-spa-vue</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>mian.js</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> singleSpaVue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;single-spa-vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">appOptions</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  el: </span><span style="color:#0A3069;">&quot;#vue&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  router,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(App),</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#6E7781;">// \u5728\u975E\u5B50\u5E94\u7528\u4E2D\u6B63\u5E38\u6302\u8F7D\u5E94\u7528</span></span>
<span class="line"><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#CF222E;">!</span><span style="color:#24292F;">window.singleSpaNavigate) {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">delete</span><span style="color:#24292F;"> appOptions.el</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">(appOptions).</span><span style="color:#8250DF;">$mount</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;#app&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">vueLifeCycle</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">singleSpaVue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">  Vue,</span></span>
<span class="line"><span style="color:#24292F;">  appOptions,</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#6E7781;">// \u5B50\u5E94\u7528\u5FC5\u987B\u5BFC\u51FA \u4EE5\u4E0B\u751F\u547D\u5468\u671F bootstrap\u3001mount\u3001unmount</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">bootstrap</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> vueLifeCycle.bootstrap</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">mount</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> vueLifeCycle.mount</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">unmount</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> vueLifeCycle.unmount</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#24292F;">vueLifeCycle</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>router.js</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">router</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">VueRouter</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">  mode: </span><span style="color:#0A3069;">&quot;history&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  base: </span><span style="color:#0A3069;">&quot;/vue&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  routes,</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u914D\u7F6E\u5E93\u6253\u5305" tabindex="-1"><a class="header-anchor" href="#_2-\u914D\u7F6E\u5E93\u6253\u5305" aria-hidden="true">#</a> 2.\u914D\u7F6E\u5E93\u6253\u5305</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#0550AE;">module</span><span style="color:#24292F;">.</span><span style="color:#0550AE;">exports</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  configureWebpack: {</span></span>
<span class="line"><span style="color:#24292F;">    output: {</span></span>
<span class="line"><span style="color:#24292F;">      library: </span><span style="color:#0A3069;">&quot;singleVue&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      libraryTarget: </span><span style="color:#0A3069;">&quot;umd&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    devServer: {</span></span>
<span class="line"><span style="color:#24292F;">      port: </span><span style="color:#0550AE;">10000</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  },</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-\u4E3B\u5E94\u7528\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#_3-\u4E3B\u5E94\u7528\u642D\u5EFA" aria-hidden="true">#</a> 3.\u4E3B\u5E94\u7528\u642D\u5EFA</h2><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;nav&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">router-link</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">to</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;/vue&quot;</span><span style="color:#24292F;">&gt;vue\u9879\u76EE&lt;/</span><span style="color:#116329;">router-link</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">id</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;vue&quot;</span><span style="color:#24292F;">&gt;&lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>main.js</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Vue </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> App </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./App.vue&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> router </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./router&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> ElementUI </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;element-ui&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;element-ui/lib/theme-chalk/index.css&quot;</span></span>
<span class="line"><span style="color:#24292F;">Vue.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(ElementUI)</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">loadScript</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">async</span><span style="color:#24292F;"> (</span><span style="color:#953800;">url</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">await</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">Promise</span><span style="color:#24292F;">((</span><span style="color:#953800;">resolve</span><span style="color:#24292F;">, </span><span style="color:#953800;">reject</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">script</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> document.</span><span style="color:#8250DF;">createElement</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;script&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    script.src </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> url</span></span>
<span class="line"><span style="color:#24292F;">    script.onload </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> resolve</span></span>
<span class="line"><span style="color:#24292F;">    script.onerror </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> reject</span></span>
<span class="line"><span style="color:#24292F;">    document.head.</span><span style="color:#8250DF;">appendChild</span><span style="color:#24292F;">(script)</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> { registerApplication, start } </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;single-spa&quot;</span></span>
<span class="line"><span style="color:#8250DF;">registerApplication</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0A3069;">&quot;singleVue&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">async</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">await</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">loadScript</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;http://localhost:10000/js/chunk-vendors.js&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">await</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">loadScript</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;http://localhost:10000/js/app.js&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> window.singleVue</span></span>
<span class="line"><span style="color:#24292F;">  },</span></span>
<span class="line"><span style="color:#24292F;">  (</span><span style="color:#953800;">location</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> location.pathname.</span><span style="color:#8250DF;">startsWith</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;/vue&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#8250DF;">start</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Vue</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">  router,</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(App),</span></span>
<span class="line"><span style="color:#24292F;">}).</span><span style="color:#8250DF;">$mount</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;#app&quot;</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u52A8\u6001\u8BBE\u7F6E\u5B50\u5E94\u7528-publicpath" tabindex="-1"><a class="header-anchor" href="#_4-\u52A8\u6001\u8BBE\u7F6E\u5B50\u5E94\u7528-publicpath" aria-hidden="true">#</a> 4.\u52A8\u6001\u8BBE\u7F6E\u5B50\u5E94\u7528 <code>publicPath</code></h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (window.singleSpaNavigate) {</span></span>
<span class="line"><span style="color:#24292F;">  __webpack_public_path__ </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;http://localhost:10000/&quot;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_5-\u72B6\u6001" aria-hidden="true">#</a> 5.\u72B6\u6001</h2><p>\u6CE8\u518C\u3001\u52A0\u8F7D\u3001\u521D\u59CB\u5316\u3001\u6302\u8F7D\u3001\u5378\u8F7D\u3001\u79FB\u9664\u3001\u9519\u8BEF <img src="`+p+'" alt=""></p>',17),c=[o];function r(t,i){return n(),a("div",null,c)}const d=s(e,[["render",r],["__file","1.singlespa.html.vue"]]);export{d as default};
