<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><title>三.登陆认证 | Vue3.x学习笔记</title><meta name="description" content="风浪没平息 我宣告奔跑的意义">
    <link rel="modulepreload" href="/web-vue3/assets/app.8390b8a1.js"><link rel="modulepreload" href="/web-vue3/assets/3.login.html.378bd3ae.js"><link rel="modulepreload" href="/web-vue3/assets/vue.runtime.esm-bundler.82c7c109.js"><link rel="modulepreload" href="/web-vue3/assets/3.login.html.7799b507.js"><link rel="prefetch" href="/web-vue3/assets/index.html.fb596a5a.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.9f74e5a5.js"><link rel="prefetch" href="/web-vue3/assets/1.utils.html.4394abab.js"><link rel="prefetch" href="/web-vue3/assets/10.skill.html.89167d87.js"><link rel="prefetch" href="/web-vue3/assets/11.mock.html.2d7b2adf.js"><link rel="prefetch" href="/web-vue3/assets/12.optimization.html.977ffc3a.js"><link rel="prefetch" href="/web-vue3/assets/13.deploy.html.17e622f5.js"><link rel="prefetch" href="/web-vue3/assets/2.project.html.4f4427d3.js"><link rel="prefetch" href="/web-vue3/assets/3.vuecli.html.90a51794.js"><link rel="prefetch" href="/web-vue3/assets/4.env.html.1f19459a.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.56c3c2c1.js"><link rel="prefetch" href="/web-vue3/assets/6.layout.html.0338432b.js"><link rel="prefetch" href="/web-vue3/assets/7.single.html.52142209.js"><link rel="prefetch" href="/web-vue3/assets/8.page.html.135f873a.js"><link rel="prefetch" href="/web-vue3/assets/9.module.html.de30fd5a.js"><link rel="prefetch" href="/web-vue3/assets/1.config.html.309067ee.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.1a419595.js"><link rel="prefetch" href="/web-vue3/assets/10.server.html.f0a98a35.js"><link rel="prefetch" href="/web-vue3/assets/11.pwa.html.6e186dfc.js"><link rel="prefetch" href="/web-vue3/assets/12.upload.html.c1028a12.js"><link rel="prefetch" href="/web-vue3/assets/13.video.html.d42d96eb.js"><link rel="prefetch" href="/web-vue3/assets/2.skill.html.189cbc4a.js"><link rel="prefetch" href="/web-vue3/assets/4.projectMonitor.html.0b5763a5.js"><link rel="prefetch" href="/web-vue3/assets/5.test.html.7b7496d6.js"><link rel="prefetch" href="/web-vue3/assets/6.configurePrem.html.341b71e8.js"><link rel="prefetch" href="/web-vue3/assets/7.internationalization.html.c06c557d.js"><link rel="prefetch" href="/web-vue3/assets/8.errorCollection.html.62d1892e.js"><link rel="prefetch" href="/web-vue3/assets/9.optimize.html.57df0570.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.b8c623e0.js"><link rel="prefetch" href="/web-vue3/assets/1.vue-cli3.html.331b13dc.js"><link rel="prefetch" href="/web-vue3/assets/2.life.html.4cfe0cea.js"><link rel="prefetch" href="/web-vue3/assets/2.vue.html.57b2dfb3.js"><link rel="prefetch" href="/web-vue3/assets/2.vue1.html.981058a8.js"><link rel="prefetch" href="/web-vue3/assets/3.vue-router.html.6c501d80.js"><link rel="prefetch" href="/web-vue3/assets/4.vuex.html.b603f145.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.818d3477.js"><link rel="prefetch" href="/web-vue3/assets/6.vueuse.html.91bedf3b.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d20ee5b9.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa.html.4cda3316.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa2.html.c3017287.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun.html.df43f06e.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun2.html.26f61d43.js"><link rel="prefetch" href="/web-vue3/assets/3.share.html.f95c5a4a.js"><link rel="prefetch" href="/web-vue3/assets/4.dev.html.1d08b485.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.b826fd43.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.233ba2c8.js"><link rel="prefetch" href="/web-vue3/assets/10.infer.html.7be10a98.js"><link rel="prefetch" href="/web-vue3/assets/11.overlapping.html.1eddac7c.js"><link rel="prefetch" href="/web-vue3/assets/12.condition.html.636a42a9.js"><link rel="prefetch" href="/web-vue3/assets/13.builtin.html.f6f12be6.js"><link rel="prefetch" href="/web-vue3/assets/14.package.html.25ba3582.js"><link rel="prefetch" href="/web-vue3/assets/15.custom.html.261522de.js"><link rel="prefetch" href="/web-vue3/assets/16.unknown.html.688c9a5e.js"><link rel="prefetch" href="/web-vue3/assets/17.module.html.cddc14d6.js"><link rel="prefetch" href="/web-vue3/assets/18.statement.html.510e3b18.js"><link rel="prefetch" href="/web-vue3/assets/19.extend.html.1828cf2f.js"><link rel="prefetch" href="/web-vue3/assets/2.base.html.c1d2473c.js"><link rel="prefetch" href="/web-vue3/assets/3.deduction.html.c2fc45e5.js"><link rel="prefetch" href="/web-vue3/assets/4.type.html.c92aa05d.js"><link rel="prefetch" href="/web-vue3/assets/5.class.html.221656c8.js"><link rel="prefetch" href="/web-vue3/assets/6.interface.html.6d05d6df.js"><link rel="prefetch" href="/web-vue3/assets/7.generic.html.f2746095.js"><link rel="prefetch" href="/web-vue3/assets/8.compatible.html.54bd7735.js"><link rel="prefetch" href="/web-vue3/assets/9.protect.html.28d633ac.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.4ab72945.js"><link rel="prefetch" href="/web-vue3/assets/1.local.html.f0ff25b0.js"><link rel="prefetch" href="/web-vue3/assets/2.gitlab.html.61eda6b1.js"><link rel="prefetch" href="/web-vue3/assets/3.genkins.html.68aabcce.js"><link rel="prefetch" href="/web-vue3/assets/4.centos.html.72883b9d.js"><link rel="prefetch" href="/web-vue3/assets/5.nginx.html.0c5cb623.js"><link rel="prefetch" href="/web-vue3/assets/1.button.html.2c3dfea9.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.d8476ce8.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d8b65384.js"><link rel="prefetch" href="/web-vue3/assets/1.recursion.html.78834090.js"><link rel="prefetch" href="/web-vue3/assets/10.tree.html.061b718a.js"><link rel="prefetch" href="/web-vue3/assets/12.table.html.e7a6e04f.js"><link rel="prefetch" href="/web-vue3/assets/13.publish.html.0629d0a7.js"><link rel="prefetch" href="/web-vue3/assets/2.dropdown.html.e14edfa6.js"><link rel="prefetch" href="/web-vue3/assets/3.dialog.html.559a5048.js"><link rel="prefetch" href="/web-vue3/assets/3.form.html.aeff8066.js"><link rel="prefetch" href="/web-vue3/assets/4.input.html.590b9d75.js"><link rel="prefetch" href="/web-vue3/assets/4.render.html.0a4fbf3a.js"><link rel="prefetch" href="/web-vue3/assets/5.checkBox.html.f572ba2f.js"><link rel="prefetch" href="/web-vue3/assets/6.cascader.html.f3050418.js"><link rel="prefetch" href="/web-vue3/assets/7.date.html.3c71400d.js"><link rel="prefetch" href="/web-vue3/assets/8.dispaly.html.f4365d57.js"><link rel="prefetch" href="/web-vue3/assets/9.alert.html.34e816ae.js"><link rel="prefetch" href="/web-vue3/assets/9.dynamics.html.ca5c48f9.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.639403d4.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.9c4f1207.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.856f6fff.js"><link rel="prefetch" href="/web-vue3/assets/10.optimize.html.300e0b35.js"><link rel="prefetch" href="/web-vue3/assets/11.gencode.html.b9fda889.js"><link rel="prefetch" href="/web-vue3/assets/12.mount.html.703cbef7.js"><link rel="prefetch" href="/web-vue3/assets/13._render.html.160e743b.js"><link rel="prefetch" href="/web-vue3/assets/14._update.html.b840835b.js"><link rel="prefetch" href="/web-vue3/assets/2.initGlobalAPI.html.99db2072.js"><link rel="prefetch" href="/web-vue3/assets/3.initMixin.html.107db306.js"><link rel="prefetch" href="/web-vue3/assets/4.stateMixin.html.2576e78e.js"><link rel="prefetch" href="/web-vue3/assets/5.eventsMixin.html.4ea50755.js"><link rel="prefetch" href="/web-vue3/assets/6.lifecycleMixin.html.3dcacb20.js"><link rel="prefetch" href="/web-vue3/assets/7.renderMixin.html.b32c98ce.js"><link rel="prefetch" href="/web-vue3/assets/8.mount.html.a2f5c03d.js"><link rel="prefetch" href="/web-vue3/assets/9.ast.html.b371600d.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.1f1b5592.js"><link rel="prefetch" href="/web-vue3/assets/2.use.html.9a4d62f9.js"><link rel="prefetch" href="/web-vue3/assets/3.origin.html.d577e7de.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.15afd4c5.js"><link rel="prefetch" href="/web-vue3/assets/404.html.c038a05a.js"><link rel="prefetch" href="/web-vue3/assets/index.html.95b0a427.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.4109cac8.js"><link rel="prefetch" href="/web-vue3/assets/1.utils.html.86cde9ff.js"><link rel="prefetch" href="/web-vue3/assets/10.skill.html.5657d66a.js"><link rel="prefetch" href="/web-vue3/assets/11.mock.html.f46245ad.js"><link rel="prefetch" href="/web-vue3/assets/12.optimization.html.5e50d3ce.js"><link rel="prefetch" href="/web-vue3/assets/13.deploy.html.07ebb41a.js"><link rel="prefetch" href="/web-vue3/assets/2.project.html.0b2ca0d8.js"><link rel="prefetch" href="/web-vue3/assets/3.vuecli.html.7e0457fe.js"><link rel="prefetch" href="/web-vue3/assets/4.env.html.cbc88455.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.5f10aed8.js"><link rel="prefetch" href="/web-vue3/assets/6.layout.html.a10daefc.js"><link rel="prefetch" href="/web-vue3/assets/7.single.html.219c836f.js"><link rel="prefetch" href="/web-vue3/assets/8.page.html.b3c49e49.js"><link rel="prefetch" href="/web-vue3/assets/9.module.html.4c3286a6.js"><link rel="prefetch" href="/web-vue3/assets/1.config.html.2a4538e9.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.81bb3b21.js"><link rel="prefetch" href="/web-vue3/assets/10.server.html.059c54f3.js"><link rel="prefetch" href="/web-vue3/assets/11.pwa.html.07fed650.js"><link rel="prefetch" href="/web-vue3/assets/12.upload.html.f72eb3e2.js"><link rel="prefetch" href="/web-vue3/assets/13.video.html.aad1b8fa.js"><link rel="prefetch" href="/web-vue3/assets/2.skill.html.dd4f5f0a.js"><link rel="prefetch" href="/web-vue3/assets/4.projectMonitor.html.7aa0cb67.js"><link rel="prefetch" href="/web-vue3/assets/5.test.html.c5829504.js"><link rel="prefetch" href="/web-vue3/assets/6.configurePrem.html.d6c72520.js"><link rel="prefetch" href="/web-vue3/assets/7.internationalization.html.c8f72201.js"><link rel="prefetch" href="/web-vue3/assets/8.errorCollection.html.ca7c565a.js"><link rel="prefetch" href="/web-vue3/assets/9.optimize.html.0e83f57e.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.8cf7453e.js"><link rel="prefetch" href="/web-vue3/assets/1.vue-cli3.html.e5658eb9.js"><link rel="prefetch" href="/web-vue3/assets/2.life.html.41aa083b.js"><link rel="prefetch" href="/web-vue3/assets/2.vue.html.52c483ae.js"><link rel="prefetch" href="/web-vue3/assets/2.vue1.html.0641550a.js"><link rel="prefetch" href="/web-vue3/assets/3.vue-router.html.0c1845f9.js"><link rel="prefetch" href="/web-vue3/assets/4.vuex.html.4987b04b.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.e8e48718.js"><link rel="prefetch" href="/web-vue3/assets/6.vueuse.html.cea3127a.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.15fea6eb.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa.html.3ed2f2e2.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa2.html.324f7a4c.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun.html.dcb95026.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun2.html.2a0a007a.js"><link rel="prefetch" href="/web-vue3/assets/3.share.html.bcf44c42.js"><link rel="prefetch" href="/web-vue3/assets/4.dev.html.1c0401c5.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.e989b7e6.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.52c90df3.js"><link rel="prefetch" href="/web-vue3/assets/10.infer.html.06d01233.js"><link rel="prefetch" href="/web-vue3/assets/11.overlapping.html.f966b41a.js"><link rel="prefetch" href="/web-vue3/assets/12.condition.html.f64504a1.js"><link rel="prefetch" href="/web-vue3/assets/13.builtin.html.80695410.js"><link rel="prefetch" href="/web-vue3/assets/14.package.html.066def34.js"><link rel="prefetch" href="/web-vue3/assets/15.custom.html.03e5fe47.js"><link rel="prefetch" href="/web-vue3/assets/16.unknown.html.592bb2c1.js"><link rel="prefetch" href="/web-vue3/assets/17.module.html.d2802e50.js"><link rel="prefetch" href="/web-vue3/assets/18.statement.html.1152e2f8.js"><link rel="prefetch" href="/web-vue3/assets/19.extend.html.5d3ea4c0.js"><link rel="prefetch" href="/web-vue3/assets/2.base.html.79a9b9c4.js"><link rel="prefetch" href="/web-vue3/assets/3.deduction.html.a69418e9.js"><link rel="prefetch" href="/web-vue3/assets/4.type.html.94420ddd.js"><link rel="prefetch" href="/web-vue3/assets/5.class.html.bc7f61ef.js"><link rel="prefetch" href="/web-vue3/assets/6.interface.html.56d3e083.js"><link rel="prefetch" href="/web-vue3/assets/7.generic.html.9ac50bb5.js"><link rel="prefetch" href="/web-vue3/assets/8.compatible.html.3f4ea154.js"><link rel="prefetch" href="/web-vue3/assets/9.protect.html.b2795aed.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d9966d86.js"><link rel="prefetch" href="/web-vue3/assets/1.local.html.4df5b3e1.js"><link rel="prefetch" href="/web-vue3/assets/2.gitlab.html.4053a02f.js"><link rel="prefetch" href="/web-vue3/assets/3.genkins.html.9cc6d40c.js"><link rel="prefetch" href="/web-vue3/assets/4.centos.html.982ee507.js"><link rel="prefetch" href="/web-vue3/assets/5.nginx.html.0a32d507.js"><link rel="prefetch" href="/web-vue3/assets/1.button.html.95c60e73.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.20885c7e.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.de1b877a.js"><link rel="prefetch" href="/web-vue3/assets/1.recursion.html.0253eb5f.js"><link rel="prefetch" href="/web-vue3/assets/10.tree.html.ad6a48b5.js"><link rel="prefetch" href="/web-vue3/assets/12.table.html.e21cd00d.js"><link rel="prefetch" href="/web-vue3/assets/13.publish.html.9bba74e4.js"><link rel="prefetch" href="/web-vue3/assets/2.dropdown.html.82f86b4a.js"><link rel="prefetch" href="/web-vue3/assets/3.dialog.html.d5db7aa7.js"><link rel="prefetch" href="/web-vue3/assets/3.form.html.1379da1c.js"><link rel="prefetch" href="/web-vue3/assets/4.input.html.40804795.js"><link rel="prefetch" href="/web-vue3/assets/4.render.html.6e84844c.js"><link rel="prefetch" href="/web-vue3/assets/5.checkBox.html.da3c2254.js"><link rel="prefetch" href="/web-vue3/assets/6.cascader.html.432f5bc3.js"><link rel="prefetch" href="/web-vue3/assets/7.date.html.59c8c38f.js"><link rel="prefetch" href="/web-vue3/assets/8.dispaly.html.8ee5c8ea.js"><link rel="prefetch" href="/web-vue3/assets/9.alert.html.90100b92.js"><link rel="prefetch" href="/web-vue3/assets/9.dynamics.html.f74e3282.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.9a606624.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d0e61b08.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.ecb82c00.js"><link rel="prefetch" href="/web-vue3/assets/10.optimize.html.8fab6090.js"><link rel="prefetch" href="/web-vue3/assets/11.gencode.html.0a1bdbcf.js"><link rel="prefetch" href="/web-vue3/assets/12.mount.html.b699c425.js"><link rel="prefetch" href="/web-vue3/assets/13._render.html.7a6aa852.js"><link rel="prefetch" href="/web-vue3/assets/14._update.html.99415da3.js"><link rel="prefetch" href="/web-vue3/assets/2.initGlobalAPI.html.ceb1f87b.js"><link rel="prefetch" href="/web-vue3/assets/3.initMixin.html.7015a932.js"><link rel="prefetch" href="/web-vue3/assets/4.stateMixin.html.c2406535.js"><link rel="prefetch" href="/web-vue3/assets/5.eventsMixin.html.c23ab67f.js"><link rel="prefetch" href="/web-vue3/assets/6.lifecycleMixin.html.167946fb.js"><link rel="prefetch" href="/web-vue3/assets/7.renderMixin.html.414350af.js"><link rel="prefetch" href="/web-vue3/assets/8.mount.html.baeba562.js"><link rel="prefetch" href="/web-vue3/assets/9.ast.html.5c18e82d.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.365131aa.js"><link rel="prefetch" href="/web-vue3/assets/2.use.html.53555ad6.js"><link rel="prefetch" href="/web-vue3/assets/3.origin.html.7011300f.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.c8cb6073.js"><link rel="prefetch" href="/web-vue3/assets/404.html.1820d32f.js">
    <link rel="stylesheet" href="/web-vue3/assets/style.935d4578.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/web-vue3/" class=""><!----><span class="site-name">Vue3.x学习笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/base/engine/1.index" class="" aria-label="一.Vue 的工程化"><!--[--><!--]--> 一.Vue 的工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/project/1.index" class="" aria-label="二.Vue 功能模块"><!--[--><!--]--> 二.Vue 功能模块 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/vue3.x/1.index" class="" aria-label="三.Vue 3.x全家桶"><!--[--><!--]--> 三.Vue 3.x全家桶 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/senior/2.typescript/1.index" class="" aria-label="一.TypeScript"><!--[--><!--]--> 一.TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/3.deploy/1.index" class="" aria-label="二.构建部署"><!--[--><!--]--> 二.构建部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/4.component/1.index" class="" aria-label="三.组件开发"><!--[--><!--]--> 三.组件开发 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-cli3.x/1.index" class="" aria-label="一.Vue/cli3.x"><!--[--><!--]--> 一.Vue/cli3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue3.x/1.index" class="" aria-label="二.Vue 3.x"><!--[--><!--]--> 二.Vue 3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-router4.x/1.index" class="" aria-label="三.Vue-Router4.x"><!--[--><!--]--> 三.Vue-Router4.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vuex4.x/1.index" class="" aria-label="四.Vuex4.x"><!--[--><!--]--> 四.Vuex4.x <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/web-vue3/read" class="" aria-label="Vue资料"><!--[--><!--]--> Vue资料 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/base/engine/1.index" class="" aria-label="一.Vue 的工程化"><!--[--><!--]--> 一.Vue 的工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/project/1.index" class="" aria-label="二.Vue 功能模块"><!--[--><!--]--> 二.Vue 功能模块 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/vue3.x/1.index" class="" aria-label="三.Vue 3.x全家桶"><!--[--><!--]--> 三.Vue 3.x全家桶 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/senior/2.typescript/1.index" class="" aria-label="一.TypeScript"><!--[--><!--]--> 一.TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/3.deploy/1.index" class="" aria-label="二.构建部署"><!--[--><!--]--> 二.构建部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/4.component/1.index" class="" aria-label="三.组件开发"><!--[--><!--]--> 三.组件开发 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-cli3.x/1.index" class="" aria-label="一.Vue/cli3.x"><!--[--><!--]--> 一.Vue/cli3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue3.x/1.index" class="" aria-label="二.Vue 3.x"><!--[--><!--]--> 二.Vue 3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-router4.x/1.index" class="" aria-label="三.Vue-Router4.x"><!--[--><!--]--> 三.Vue-Router4.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vuex4.x/1.index" class="" aria-label="四.Vuex4.x"><!--[--><!--]--> 四.Vuex4.x <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/web-vue3/read" class="" aria-label="Vue资料"><!--[--><!--]--> Vue资料 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/web-vue3/base/project/1.index.html" class="sidebar-item sidebar-heading" aria-label="Vue 功能模块"><!--[--><!--]--> Vue 功能模块 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/1.config.html" class="sidebar-item sidebar-heading" aria-label="一.项目配置"><!--[--><!--]--> 一.项目配置 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/2.skill.html" class="sidebar-item sidebar-heading" aria-label="二.包管理工具"><!--[--><!--]--> 二.包管理工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="三.登陆认证"><!--[--><!--]--> 三.登陆认证 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_1-登录注册部分" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.登录注册部分"><!--[--><!--]--> 1.登录注册部分 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_2-权限认证部分" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.权限认证部分"><!--[--><!--]--> 2.权限认证部分 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_1·什么是-jwt" class="router-link-active router-link-exact-active sidebar-item" aria-label="1·什么是 jwt"><!--[--><!--]--> 1·什么是 jwt <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#jwt-包含了三部分" class="router-link-active router-link-exact-active sidebar-item" aria-label="JWT 包含了三部分"><!--[--><!--]--> JWT 包含了三部分 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#使用方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用方式"><!--[--><!--]--> 使用方式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_2-服务端返回-token" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.服务端返回 token"><!--[--><!--]--> 2.服务端返回 token <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_3-路由设置" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.路由设置"><!--[--><!--]--> 3.路由设置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_4-axios-封装" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.axios 封装"><!--[--><!--]--> 4.axios 封装 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_5-测试接口" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.测试接口"><!--[--><!--]--> 5.测试接口 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_6-在-vuex-中发送请求" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.在 vuex 中发送请求"><!--[--><!--]--> 6.在 vuex 中发送请求 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/base/project/3.login.html#_7-权限认证" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.权限认证"><!--[--><!--]--> 7.权限认证 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/web-vue3/base/project/4.projectMonitor.html" class="sidebar-item sidebar-heading" aria-label="四.前端监控"><!--[--><!--]--> 四.前端监控 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/5.test.html" class="sidebar-item sidebar-heading" aria-label="五.前端测试"><!--[--><!--]--> 五.前端测试 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/6.configurePrem.html" class="sidebar-item sidebar-heading" aria-label="六.权限管理"><!--[--><!--]--> 六.权限管理 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/7.internationalization.html" class="sidebar-item sidebar-heading" aria-label="七.国际化"><!--[--><!--]--> 七.国际化 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/8.errorCollection.html" class="sidebar-item sidebar-heading" aria-label="八.常见问题"><!--[--><!--]--> 八.常见问题 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/9.optimize.html" class="sidebar-item sidebar-heading" aria-label="九.项目优化"><!--[--><!--]--> 九.项目优化 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/10.server.html" class="sidebar-item sidebar-heading" aria-label="十.服务端渲染"><!--[--><!--]--> 十.服务端渲染 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/11.pwa.html" class="sidebar-item sidebar-heading" aria-label="十一.PWA"><!--[--><!--]--> 十一.PWA <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/12.upload.html" class="sidebar-item sidebar-heading" aria-label="十二.上传下载功能"><!--[--><!--]--> 十二.上传下载功能 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/base/project/13.video.html" class="sidebar-item sidebar-heading" aria-label="十三.视频监控"><!--[--><!--]--> 十三.视频监控 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="三-登陆认证" tabindex="-1"><a class="header-anchor" href="#三-登陆认证" aria-hidden="true">#</a> 三.登陆认证</h1><div class="custom-container tip"><p class="custom-container-title">前言</p><p>用户通过登陆认证，识别相关用户，是一个允许用户访问其权限相应的资源的过程</p></div><h2 id="_1-登录注册部分" tabindex="-1"><a class="header-anchor" href="#_1-登录注册部分" aria-hidden="true">#</a> 1.登录注册部分</h2><div class="demo-block demo-3 demoblock-custom" data-v-1f4699cc><div class="source" data-v-1f4699cc><!--[--><div><form class="el-form el-form--default el-form--label-right login-box"><!--[--><h3 class="login-title">欢迎登录</h3><div class="el-form-item is-required asterisk-left" role="group" aria-labelledby="el-id-7399-0"><!--[--><!--[--><div id="el-id-7399-0" class="el-form-item__label" style="width:80px;"><!--[-->账号<!--]--></div><!--]--><!--]--><div class="el-form-item__content" style=""><!--[--><div class="el-input" style=""><!-- input --><!--[--><!-- prepend slot --><!--v-if--><div class="el-input__wrapper"><!-- prefix slot --><!--v-if--><input class="el-input__inner" type="text" autocomplete="off" tabindex="0" placeholder="请输入账号" style=""><!-- suffix slot --><!--v-if--></div><!-- append slot --><!--v-if--><!--]--></div><!--]--><!--v-if--></div></div><div class="el-form-item is-required asterisk-left" role="group" aria-labelledby="el-id-7399-1"><!--[--><!--[--><div id="el-id-7399-1" class="el-form-item__label" style="width:80px;"><!--[-->密码<!--]--></div><!--]--><!--]--><div class="el-form-item__content" style=""><!--[--><div class="el-input" style=""><!-- input --><!--[--><!-- prepend slot --><!--v-if--><div class="el-input__wrapper"><!-- prefix slot --><!--v-if--><input class="el-input__inner" auto-complete="new-password" type="password" autocomplete="off" tabindex="0" placeholder="请输入密码" style=""><!-- suffix slot --><!--v-if--></div><!-- append slot --><!--v-if--><!--]--></div><!--]--><!--v-if--></div></div><div class="el-form-item asterisk-left"><!--[--><!--[--><!--v-if--><!--]--><!--]--><div class="el-form-item__content" style="margin-left:80px;"><!--[--><button class="el-button el-button--primary" aria-disabled="false" type="button" style=""><!--v-if--><span class=""><!--[-->登录<!--]--></span></button><!--]--><!--v-if--></div></div><!--]--></form><!--teleport start--><div class="el-overlay" style="z-index:2001;display:none;"><!--[--><div role="dialog" aria-modal="true" aria-label="温馨提示" aria-describedby="el-id-7399-3" class="el-overlay-dialog" style=""><!--[--><!--]--></div><!--]--></div><!--teleport end--></div><!--]--></div><div class="meta" data-v-1f4699cc><!----><div class="highlight" data-v-1f4699cc><!--[--><div class="language-vue"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">el-form</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">ref</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;loginForm&quot;</span></span>
<span class="line"><span style="color:#24292F;">      :</span><span style="color:#0550AE;">model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">form</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">      :</span><span style="color:#0550AE;">rules</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">rules</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">label-width</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;80px&quot;</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">class</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;login-box&quot;</span></span>
<span class="line"><span style="color:#24292F;">    &gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">h3</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">class</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;login-title&quot;</span><span style="color:#24292F;">&gt;欢迎登录&lt;/</span><span style="color:#116329;">h3</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">el-form-item</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">label</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;账号&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">prop</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;username&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">el-input</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">placeholder</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;请输入账号&quot;</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">form.username</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">        /&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">el-form-item</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">el-form-item</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">label</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;密码&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">prop</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;password&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">el-input</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;password&quot;</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">placeholder</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;请输入密码&quot;</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">form.password</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">auto-complete</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;new-password&quot;</span></span>
<span class="line"><span style="color:#24292F;">        /&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">el-form-item</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">el-form-item</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">el-button</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;primary&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-on</span><span style="color:#24292F;">:</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#8250DF;">onSubmit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;loginForm&#39;</span><span style="color:#24292F;">)</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">          &gt;登录&lt;/</span><span style="color:#116329;">el-button</span></span>
<span class="line"><span style="color:#24292F;">        &gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">el-form-item</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">el-form</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">el-dialog</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">title</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;温馨提示&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">visible</span><span style="color:#24292F;">.</span><span style="color:#0550AE;">sync</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">dialogVisible</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">width</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;30%&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;请输入账号和密码&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;footer&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">class</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;dialog-footer&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">el-button</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;primary&quot;</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">dialogVisible </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">          &gt;确 定&lt;/</span><span style="color:#116329;">el-button</span></span>
<span class="line"><span style="color:#24292F;">        &gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">el-dialog</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">name: </span><span style="color:#0A3069;">&quot;Login&quot;</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">data</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      form: {</span></span>
<span class="line"><span style="color:#24292F;">        username: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        password: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      rules: {</span></span>
<span class="line"><span style="color:#24292F;">        username: [</span></span>
<span class="line"><span style="color:#24292F;">          { required: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">, message: </span><span style="color:#0A3069;">&quot;账号不可为空&quot;</span><span style="color:#24292F;">, trigger: </span><span style="color:#0A3069;">&quot;blur&quot;</span><span style="color:#24292F;"> },</span></span>
<span class="line"><span style="color:#24292F;">        ],</span></span>
<span class="line"><span style="color:#24292F;">        password: [</span></span>
<span class="line"><span style="color:#24292F;">          { required: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">, message: </span><span style="color:#0A3069;">&quot;密码不可为空&quot;</span><span style="color:#24292F;">, trigger: </span><span style="color:#0A3069;">&quot;blur&quot;</span><span style="color:#24292F;"> },</span></span>
<span class="line"><span style="color:#24292F;">        ],</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      dialogVisible: </span><span style="color:#0550AE;">false</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    };</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">onSubmit</span><span style="color:#24292F;">(</span><span style="color:#953800;">formName</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs[formName].</span><span style="color:#8250DF;">validate</span><span style="color:#24292F;">((</span><span style="color:#953800;">valid</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (valid) {</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">alert</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;登录成功!&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">          location.</span><span style="color:#8250DF;">reload</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">        } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.dialogVisible </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        }</span></span>
<span class="line"><span style="color:#24292F;">      });</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#0550AE;">.login-box</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">border</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">1</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">solid</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">#dcdfe6</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">width</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">350</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">margin</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">180</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">auto</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">padding</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">35</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">35</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">15</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">35</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">border-radius</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">5</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">-webkit-border-radius</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">5</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">-moz-border-radius</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">5</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">box-shadow</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">0</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">25</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">#909399</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#0550AE;">.login-title</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">text-align</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">center</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">margin</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">0</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">auto</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">40</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">auto</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">color</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">#303133</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-1f4699cc><i class="control-icon icon-caret-down" data-v-1f4699cc></i><span style="display:none;" class="control-text" data-v-1f4699cc>显示代码</span><div class="control-button-wrap" data-v-1f4699cc><span style="display:none;" class="control-button copy-button" data-v-1f4699cc>复制代码片段</span></div></div></div><h2 id="_2-权限认证部分" tabindex="-1"><a class="header-anchor" href="#_2-权限认证部分" aria-hidden="true">#</a> 2.权限认证部分</h2><h2 id="_1·什么是-jwt" tabindex="-1"><a class="header-anchor" href="#_1·什么是-jwt" aria-hidden="true">#</a> 1·什么是 jwt</h2><ul><li>JSON Web Token(JWT）是目前最流行的身份验证解决方案</li></ul><p><strong>解决问题</strong>：session 不支持分布式架构，无法支持横向扩展，只能通过数据库来保存会话数据实现共享。如果持久层失败会出现认证失败。</p><p><strong>优点</strong>：服务器不保存任何会话数据，即服务器变为无状态，使其更容易扩展。</p><h3 id="jwt-包含了三部分" tabindex="-1"><a class="header-anchor" href="#jwt-包含了三部分" aria-hidden="true">#</a> JWT 包含了三部分</h3><ul><li><p>Header 头部</p><div class="language-json ext-json line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">{ </span><span style="color:#0550AE;">&quot;alg&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;HS256&quot;</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">&quot;typ&quot;</span><span style="color:#24292F;">: </span><span style="color:#0A3069;">&quot;JWT&quot;</span><span style="color:#24292F;"> }</span></span>
<span class="line"><span style="color:#6E7781;">// algorithm =&gt; HMAC SHA256</span></span>
<span class="line"><span style="color:#6E7781;">// type =&gt; JWT</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Payload 负荷、载荷</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">JWT 规定了7个官方字段</span></span>
<span class="line"><span style="color:#24292F;">iss (issuer)：签发人</span></span>
<span class="line"><span style="color:#24292F;">exp (expiration time)：过期时间</span></span>
<span class="line"><span style="color:#24292F;">sub (subject)：主题</span></span>
<span class="line"><span style="color:#24292F;">aud (audience)：受众</span></span>
<span class="line"><span style="color:#24292F;">nbf (Not Before)：生效时间</span></span>
<span class="line"><span style="color:#24292F;">iat (Issued At)：签发时间</span></span>
<span class="line"><span style="color:#24292F;">jti (JWT ID)：编号</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Signature 签名 对前面两部分的签名，防止数据篡改</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#8250DF;">HMACSHA256</span><span style="color:#24292F;">(</span><span style="color:#8250DF;">base64UrlEncode</span><span style="color:#24292F;">(header) </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;.&quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">base64UrlEncode</span><span style="color:#24292F;">(payload), secret);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>JWT 作为一个令牌（token）,有些场合可能会放到 URL（比如：api.example.com?token=xxx）。Base64 有三个字符<code>+</code>、<code>/</code>和<code>=</code>，在 URL 里面有特殊含义，所以要被替换掉：<code>=</code>被忽略、<code>+</code>替换成<code>-</code>,<code>/</code>替换成<code>_</code>。这就是 Base64URL 算法。</p></li></ul><h3 id="使用方式" tabindex="-1"><a class="header-anchor" href="#使用方式" aria-hidden="true">#</a> 使用方式</h3><ul><li><p>HTTP 请求头信息</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">Authorization: Bearer </span><span style="color:#CF222E;">&lt;</span><span style="color:#24292F;">token</span><span style="color:#CF222E;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>通过 url 传输</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">http://www.xxx.com/pwa</span><span style="color:#CF222E;">?</span><span style="color:#24292F;">token=xxxxx</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h2 id="_2-服务端返回-token" tabindex="-1"><a class="header-anchor" href="#_2-服务端返回-token" aria-hidden="true">#</a> 2.服务端返回 token</h2><details class="custom-container details"><summary>express 实现</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> express </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">require</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;express&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> app </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">express</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> bodyParse </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">require</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;body-parser&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> jwt </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">require</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;jsonwebtoken&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">app.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">((</span><span style="color:#953800;">req</span><span style="color:#24292F;">,</span><span style="color:#953800;">res</span><span style="color:#24292F;">,</span><span style="color:#953800;">next</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  res.</span><span style="color:#8250DF;">header</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#24292F;">,</span><span style="color:#0A3069;">&#39;http://localhost:8080&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">  res.</span><span style="color:#8250DF;">header</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;Access-Control-Allow-Methods&#39;</span><span style="color:#24292F;">,</span><span style="color:#0A3069;">&#39;GET,HEAD,OPTIONS,POST,PUT&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">  res.</span><span style="color:#8250DF;">header</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;Access-Control-Allow-Methods&#39;</span><span style="color:#24292F;">,</span><span style="color:#0A3069;">&#39;Origin,X-Requested-With,Content-Type,Accept,Authorization&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(req.methods.</span><span style="color:#8250DF;">toLowerCase</span><span style="color:#24292F;">() </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;options&#39;</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> res.</span><span style="color:#8250DF;">end</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">next</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#24292F;">app.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(bodyParse.</span><span style="color:#8250DF;">json</span><span style="color:#24292F;">())</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> secret </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;zfjg&#39;</span></span>
<span class="line"><span style="color:#24292F;">app.</span><span style="color:#8250DF;">get</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;/test&#39;</span><span style="color:#24292F;">,(</span><span style="color:#953800;">req</span><span style="color:#24292F;">,</span><span style="color:#953800;">res</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  res.</span><span style="color:#8250DF;">end</span><span style="color:#24292F;">({test:</span><span style="color:#0A3069;">&#39;test&#39;</span><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#24292F;">app.</span><span style="color:#8250DF;">post</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;/login&#39;</span><span style="color:#24292F;">,(</span><span style="color:#953800;">req</span><span style="color:#24292F;">,</span><span style="color:#953800;">res</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> {username} </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> req.body</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(username </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;admin&#39;</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">    res.</span><span style="color:#8250DF;">json</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      code:</span><span style="color:#0550AE;">0.</span></span>
<span class="line"><span style="color:#24292F;">      username:</span><span style="color:#0A3069;">&#39;admin&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      token:jwt.</span><span style="color:#8250DF;">sign</span><span style="color:#24292F;">({username:</span><span style="color:#0A3069;">&#39;admin&#39;</span><span style="color:#24292F;">},secret,{</span></span>
<span class="line"><span style="color:#24292F;">        expiresIn:</span><span style="color:#0550AE;">20</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#CF222E;">else</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    res.</span><span style="color:#8250DF;">json</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      code:</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      data:</span><span style="color:#0A3069;">&#39;用户名不存在&#39;</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#24292F;">app.</span><span style="color:#8250DF;">get</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;/validate&#39;</span><span style="color:#24292F;">,(</span><span style="color:#953800;">req</span><span style="color:#24292F;">,</span><span style="color:#953800;">res</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> token </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> req.headers.authorization</span></span>
<span class="line"><span style="color:#24292F;">  jwt.</span><span style="color:#8250DF;">verify</span><span style="color:#24292F;">(token,secret,(</span><span style="color:#953800;">err</span><span style="color:#24292F;">,</span><span style="color:#953800;">decode</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(err){</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> res.</span><span style="color:#8250DF;">json</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">        code:</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        data:</span><span style="color:#0A3069;">&#39;token失效了&#39;</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    }</span><span style="color:#CF222E;">else</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">      res.</span><span style="color:#8250DF;">json</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">        username:decode.username,</span></span>
<span class="line"><span style="color:#24292F;">        code:</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        token:jwt.</span><span style="color:#8250DF;">sign</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">          username:</span><span style="color:#0A3069;">&#39;admin&#39;</span></span>
<span class="line"><span style="color:#24292F;">        },secret,{</span></span>
<span class="line"><span style="color:#24292F;">          expiresIn:</span><span style="color:#0550AE;">20</span></span>
<span class="line"><span style="color:#24292F;">        })</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  })</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#24292F;">app.</span><span style="color:#8250DF;">listen</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">3000</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="_3-路由设置" tabindex="-1"><a class="header-anchor" href="#_3-路由设置" aria-hidden="true">#</a> 3.路由设置</h2><ul><li>home.vue 首页</li><li>profile.vue 个人中心</li><li>login.vue 登陆页面</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#8250DF;">Router</span><span style="color:#953800;">({</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">mode: </span><span style="color:#0A3069;">&quot;history&quot;</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">base: p<wbr>rocess.env.</span><span style="color:#0550AE;">BASE_URL</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">routes: [</span></span>
<span class="line"><span style="color:#24292F;">    {</span></span>
<span class="line"><span style="color:#24292F;">      path: </span><span style="color:#0A3069;">&quot;/&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      name: </span><span style="color:#0A3069;">&quot;home&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      component: Home,</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    {</span></span>
<span class="line"><span style="color:#24292F;">      path: </span><span style="color:#0A3069;">&quot;/profile&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      name: </span><span style="color:#0A3069;">&quot;profile&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      component: Profile,</span></span>
<span class="line"><span style="color:#24292F;">      meta: { needLogin: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;"> }, </span><span style="color:#6E7781;">// 必须要登录才能访问</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    {</span></span>
<span class="line"><span style="color:#24292F;">      path: </span><span style="color:#0A3069;">&quot;/login&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      name: </span><span style="color:#0A3069;">&quot;login&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      component: Login,</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  ]</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">})</span><span style="color:#24292F;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-axios-封装" tabindex="-1"><a class="header-anchor" href="#_4-axios-封装" aria-hidden="true">#</a> 4.axios 封装</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> axios </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;axios&quot;</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#CF222E;">class</span><span style="color:#24292F;"> </span><span style="color:#953800;">FetchData</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">constructor</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.baseURL </span><span style="color:#CF222E;">=</span></span>
<span class="line"><span style="color:#24292F;">      p<wbr>rocess.env.</span><span style="color:#0550AE;">NODE_ENV</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;development&quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">?</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;http://localhost:3000&quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">:</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;/&quot;</span><span style="color:#24292F;">; </span><span style="color:#6E7781;">// 请求路径</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.timeout </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">3000</span><span style="color:#24292F;">; </span><span style="color:#6E7781;">// 设置超时时间</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">setInterceptor</span><span style="color:#24292F;">(</span><span style="color:#953800;">instance</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// 设置拦截器</span></span>
<span class="line"><span style="color:#24292F;">    instance.interceptors.request.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">      (</span><span style="color:#953800;">config</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        config.headers.Authorization </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">`${</span><span style="color:#24292F;">localStorage</span><span style="color:#0A3069;">.</span><span style="color:#8250DF;">getItem</span><span style="color:#0A3069;">(</span><span style="color:#0A3069;">&quot;token&quot;</span><span style="color:#0A3069;">)</span><span style="color:#0A3069;">}`</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> config; </span><span style="color:#6E7781;">// 增加token</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      (</span><span style="color:#953800;">err</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">Promise</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">reject</span><span style="color:#24292F;">(err);</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    instance.interceptors.response.</span><span style="color:#8250DF;">use</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">      (</span><span style="color:#953800;">res</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> res.data,</span></span>
<span class="line"><span style="color:#24292F;">      (</span><span style="color:#953800;">err</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">Promise</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">reject</span><span style="color:#24292F;">(err);</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    );</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">request</span><span style="color:#24292F;">(</span><span style="color:#953800;">request</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">instance</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> axios.</span><span style="color:#8250DF;">create</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">config</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      baseURL: </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.baseURL,</span></span>
<span class="line"><span style="color:#24292F;">      timeout: </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.timeout,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">...</span><span style="color:#24292F;">request,</span></span>
<span class="line"><span style="color:#24292F;">    }; </span><span style="color:#6E7781;">// 合并配置</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">setInterceptor</span><span style="color:#24292F;">(instance);</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">instance</span><span style="color:#24292F;">(config);</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#8250DF;">FetchData</span><span style="color:#953800;">()</span><span style="color:#24292F;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-测试接口" tabindex="-1"><a class="header-anchor" href="#_5-测试接口" aria-hidden="true">#</a> 5.测试接口</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">export</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getTest</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> fetchData.</span><span style="color:#8250DF;">request</span><span style="color:#24292F;">({ url: </span><span style="color:#0A3069;">&quot;/test&quot;</span><span style="color:#24292F;"> });</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">login</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> (</span><span style="color:#953800;">username</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span></span>
<span class="line"><span style="color:#24292F;">  fetchData.</span><span style="color:#8250DF;">request</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">    url: </span><span style="color:#0A3069;">&quot;/login&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    method: </span><span style="color:#0A3069;">&quot;POST&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    data: {</span></span>
<span class="line"><span style="color:#24292F;">      username,</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  });</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">validate</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> fetchData.</span><span style="color:#8250DF;">request</span><span style="color:#24292F;">({ url: </span><span style="color:#0A3069;">&quot;/validate&quot;</span><span style="color:#24292F;"> });</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-在-vuex-中发送请求" tabindex="-1"><a class="header-anchor" href="#_6-在-vuex-中发送请求" aria-hidden="true">#</a> 6.在 vuex 中发送请求</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> </span><span style="color:#CF222E;">new</span><span style="color:#953800;"> </span><span style="color:#24292F;">Vuex</span><span style="color:#953800;">.</span><span style="color:#8250DF;">Store</span><span style="color:#953800;">({</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">state: {</span></span>
<span class="line"><span style="color:#24292F;">    username: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">mutations: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">setUsername</span><span style="color:#24292F;">(</span><span style="color:#953800;">state</span><span style="color:#24292F;">, </span><span style="color:#953800;">username</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      state.username </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> username;</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">actions: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">async</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">login</span><span style="color:#24292F;">({ </span><span style="color:#953800;">commit</span><span style="color:#24292F;"> }, </span><span style="color:#953800;">username</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">r</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">await</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">login</span><span style="color:#24292F;">(username); </span><span style="color:#6E7781;">// 登录成功后返回用户名信息</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (r.token) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// 如果有返回token说明成功</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;setUsername&quot;</span><span style="color:#24292F;">, username); </span><span style="color:#6E7781;">// 将用户存入state中</span></span>
<span class="line"><span style="color:#24292F;">        localStorage.</span><span style="color:#8250DF;">setItem</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;token&quot;</span><span style="color:#24292F;">, r.token); </span><span style="color:#6E7781;">// 将token存放起来</span></span>
<span class="line"><span style="color:#24292F;">      } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// 否则返回失败的promise</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">Promise</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">reject</span><span style="color:#24292F;">(r);</span></span>
<span class="line"><span style="color:#24292F;">      }</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">})</span><span style="color:#24292F;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-权限认证" tabindex="-1"><a class="header-anchor" href="#_7-权限认证" aria-hidden="true">#</a> 7.权限认证</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">async </span><span style="color:#8250DF;">validate</span><span style="color:#24292F;">({ commit }) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">r</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">await</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">validate</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (r.code </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">commit</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;setUsername&#39;</span><span style="color:#24292F;">, r.username);</span></span>
<span class="line"><span style="color:#24292F;">    localStorage.</span><span style="color:#8250DF;">setItem</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;token&#39;</span><span style="color:#24292F;">, r.token); </span><span style="color:#6E7781;">// 将token存放起来</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>判断用户访问权限</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">router.</span><span style="color:#8250DF;">beforeEach</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">async</span><span style="color:#24292F;"> (</span><span style="color:#953800;">to</span><span style="color:#24292F;">, </span><span style="color:#953800;">from</span><span style="color:#24292F;">, </span><span style="color:#953800;">next</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// 如果不需要校验可以设置白名单</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">isLogin</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">await</span><span style="color:#24292F;"> store.</span><span style="color:#8250DF;">dispatch</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;validate&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (isLogin) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// 如果是登录</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (to.name </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;login&quot;</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">next</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;/profile&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">    } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">next</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">flag</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> to.matched.</span><span style="color:#8250DF;">some</span><span style="color:#24292F;">((</span><span style="color:#953800;">item</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> item.meta.needLogin);</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (flag) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">next</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;/login&quot;</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">    } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">next</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhoubichuan@icloud.com">周必川</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/web-vue3/base/project/2.skill.html" class="" aria-label="二.包管理工具"><!--[--><!--]--> 二.包管理工具 <!--[--><!--]--></a></span><span class="next"><a href="/web-vue3/base/project/4.projectMonitor.html" class="" aria-label="四.前端监控"><!--[--><!--]--> 四.前端监控 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/web-vue3/assets/app.8390b8a1.js" defer></script>
  </body>
</html>
