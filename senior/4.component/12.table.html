<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><title>三.数据输出（表格） | Vue3.x学习笔记</title><meta name="description" content="风浪没平息 我宣告奔跑的意义">
    <link rel="modulepreload" href="/web-vue3/assets/app.8390b8a1.js"><link rel="modulepreload" href="/web-vue3/assets/12.table.html.e21cd00d.js"><link rel="modulepreload" href="/web-vue3/assets/12.table.html.e7a6e04f.js"><link rel="prefetch" href="/web-vue3/assets/index.html.fb596a5a.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.9f74e5a5.js"><link rel="prefetch" href="/web-vue3/assets/1.utils.html.4394abab.js"><link rel="prefetch" href="/web-vue3/assets/10.skill.html.89167d87.js"><link rel="prefetch" href="/web-vue3/assets/11.mock.html.2d7b2adf.js"><link rel="prefetch" href="/web-vue3/assets/12.optimization.html.977ffc3a.js"><link rel="prefetch" href="/web-vue3/assets/13.deploy.html.17e622f5.js"><link rel="prefetch" href="/web-vue3/assets/2.project.html.4f4427d3.js"><link rel="prefetch" href="/web-vue3/assets/3.vuecli.html.90a51794.js"><link rel="prefetch" href="/web-vue3/assets/4.env.html.1f19459a.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.56c3c2c1.js"><link rel="prefetch" href="/web-vue3/assets/6.layout.html.0338432b.js"><link rel="prefetch" href="/web-vue3/assets/7.single.html.52142209.js"><link rel="prefetch" href="/web-vue3/assets/8.page.html.135f873a.js"><link rel="prefetch" href="/web-vue3/assets/9.module.html.de30fd5a.js"><link rel="prefetch" href="/web-vue3/assets/1.config.html.309067ee.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.1a419595.js"><link rel="prefetch" href="/web-vue3/assets/10.server.html.f0a98a35.js"><link rel="prefetch" href="/web-vue3/assets/11.pwa.html.6e186dfc.js"><link rel="prefetch" href="/web-vue3/assets/12.upload.html.c1028a12.js"><link rel="prefetch" href="/web-vue3/assets/13.video.html.d42d96eb.js"><link rel="prefetch" href="/web-vue3/assets/2.skill.html.189cbc4a.js"><link rel="prefetch" href="/web-vue3/assets/3.login.html.7799b507.js"><link rel="prefetch" href="/web-vue3/assets/4.projectMonitor.html.0b5763a5.js"><link rel="prefetch" href="/web-vue3/assets/5.test.html.7b7496d6.js"><link rel="prefetch" href="/web-vue3/assets/6.configurePrem.html.341b71e8.js"><link rel="prefetch" href="/web-vue3/assets/7.internationalization.html.c06c557d.js"><link rel="prefetch" href="/web-vue3/assets/8.errorCollection.html.62d1892e.js"><link rel="prefetch" href="/web-vue3/assets/9.optimize.html.57df0570.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.b8c623e0.js"><link rel="prefetch" href="/web-vue3/assets/1.vue-cli3.html.331b13dc.js"><link rel="prefetch" href="/web-vue3/assets/2.life.html.4cfe0cea.js"><link rel="prefetch" href="/web-vue3/assets/2.vue.html.57b2dfb3.js"><link rel="prefetch" href="/web-vue3/assets/2.vue1.html.981058a8.js"><link rel="prefetch" href="/web-vue3/assets/3.vue-router.html.6c501d80.js"><link rel="prefetch" href="/web-vue3/assets/4.vuex.html.b603f145.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.818d3477.js"><link rel="prefetch" href="/web-vue3/assets/6.vueuse.html.91bedf3b.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d20ee5b9.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa.html.4cda3316.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa2.html.c3017287.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun.html.df43f06e.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun2.html.26f61d43.js"><link rel="prefetch" href="/web-vue3/assets/3.share.html.f95c5a4a.js"><link rel="prefetch" href="/web-vue3/assets/4.dev.html.1d08b485.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.b826fd43.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.233ba2c8.js"><link rel="prefetch" href="/web-vue3/assets/10.infer.html.7be10a98.js"><link rel="prefetch" href="/web-vue3/assets/11.overlapping.html.1eddac7c.js"><link rel="prefetch" href="/web-vue3/assets/12.condition.html.636a42a9.js"><link rel="prefetch" href="/web-vue3/assets/13.builtin.html.f6f12be6.js"><link rel="prefetch" href="/web-vue3/assets/14.package.html.25ba3582.js"><link rel="prefetch" href="/web-vue3/assets/15.custom.html.261522de.js"><link rel="prefetch" href="/web-vue3/assets/16.unknown.html.688c9a5e.js"><link rel="prefetch" href="/web-vue3/assets/17.module.html.cddc14d6.js"><link rel="prefetch" href="/web-vue3/assets/18.statement.html.510e3b18.js"><link rel="prefetch" href="/web-vue3/assets/19.extend.html.1828cf2f.js"><link rel="prefetch" href="/web-vue3/assets/2.base.html.c1d2473c.js"><link rel="prefetch" href="/web-vue3/assets/3.deduction.html.c2fc45e5.js"><link rel="prefetch" href="/web-vue3/assets/4.type.html.c92aa05d.js"><link rel="prefetch" href="/web-vue3/assets/5.class.html.221656c8.js"><link rel="prefetch" href="/web-vue3/assets/6.interface.html.6d05d6df.js"><link rel="prefetch" href="/web-vue3/assets/7.generic.html.f2746095.js"><link rel="prefetch" href="/web-vue3/assets/8.compatible.html.54bd7735.js"><link rel="prefetch" href="/web-vue3/assets/9.protect.html.28d633ac.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.4ab72945.js"><link rel="prefetch" href="/web-vue3/assets/1.local.html.f0ff25b0.js"><link rel="prefetch" href="/web-vue3/assets/2.gitlab.html.61eda6b1.js"><link rel="prefetch" href="/web-vue3/assets/3.genkins.html.68aabcce.js"><link rel="prefetch" href="/web-vue3/assets/4.centos.html.72883b9d.js"><link rel="prefetch" href="/web-vue3/assets/5.nginx.html.0c5cb623.js"><link rel="prefetch" href="/web-vue3/assets/1.button.html.2c3dfea9.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.d8476ce8.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d8b65384.js"><link rel="prefetch" href="/web-vue3/assets/1.recursion.html.78834090.js"><link rel="prefetch" href="/web-vue3/assets/10.tree.html.061b718a.js"><link rel="prefetch" href="/web-vue3/assets/13.publish.html.0629d0a7.js"><link rel="prefetch" href="/web-vue3/assets/2.dropdown.html.e14edfa6.js"><link rel="prefetch" href="/web-vue3/assets/3.dialog.html.559a5048.js"><link rel="prefetch" href="/web-vue3/assets/3.form.html.aeff8066.js"><link rel="prefetch" href="/web-vue3/assets/4.input.html.590b9d75.js"><link rel="prefetch" href="/web-vue3/assets/4.render.html.0a4fbf3a.js"><link rel="prefetch" href="/web-vue3/assets/5.checkBox.html.f572ba2f.js"><link rel="prefetch" href="/web-vue3/assets/6.cascader.html.f3050418.js"><link rel="prefetch" href="/web-vue3/assets/7.date.html.3c71400d.js"><link rel="prefetch" href="/web-vue3/assets/8.dispaly.html.f4365d57.js"><link rel="prefetch" href="/web-vue3/assets/9.alert.html.34e816ae.js"><link rel="prefetch" href="/web-vue3/assets/9.dynamics.html.ca5c48f9.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.639403d4.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.9c4f1207.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.856f6fff.js"><link rel="prefetch" href="/web-vue3/assets/10.optimize.html.300e0b35.js"><link rel="prefetch" href="/web-vue3/assets/11.gencode.html.b9fda889.js"><link rel="prefetch" href="/web-vue3/assets/12.mount.html.703cbef7.js"><link rel="prefetch" href="/web-vue3/assets/13._render.html.160e743b.js"><link rel="prefetch" href="/web-vue3/assets/14._update.html.b840835b.js"><link rel="prefetch" href="/web-vue3/assets/2.initGlobalAPI.html.99db2072.js"><link rel="prefetch" href="/web-vue3/assets/3.initMixin.html.107db306.js"><link rel="prefetch" href="/web-vue3/assets/4.stateMixin.html.2576e78e.js"><link rel="prefetch" href="/web-vue3/assets/5.eventsMixin.html.4ea50755.js"><link rel="prefetch" href="/web-vue3/assets/6.lifecycleMixin.html.3dcacb20.js"><link rel="prefetch" href="/web-vue3/assets/7.renderMixin.html.b32c98ce.js"><link rel="prefetch" href="/web-vue3/assets/8.mount.html.a2f5c03d.js"><link rel="prefetch" href="/web-vue3/assets/9.ast.html.b371600d.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.1f1b5592.js"><link rel="prefetch" href="/web-vue3/assets/2.use.html.9a4d62f9.js"><link rel="prefetch" href="/web-vue3/assets/3.origin.html.d577e7de.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.15afd4c5.js"><link rel="prefetch" href="/web-vue3/assets/404.html.c038a05a.js"><link rel="prefetch" href="/web-vue3/assets/index.html.95b0a427.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.4109cac8.js"><link rel="prefetch" href="/web-vue3/assets/1.utils.html.86cde9ff.js"><link rel="prefetch" href="/web-vue3/assets/10.skill.html.5657d66a.js"><link rel="prefetch" href="/web-vue3/assets/11.mock.html.f46245ad.js"><link rel="prefetch" href="/web-vue3/assets/12.optimization.html.5e50d3ce.js"><link rel="prefetch" href="/web-vue3/assets/13.deploy.html.07ebb41a.js"><link rel="prefetch" href="/web-vue3/assets/2.project.html.0b2ca0d8.js"><link rel="prefetch" href="/web-vue3/assets/3.vuecli.html.7e0457fe.js"><link rel="prefetch" href="/web-vue3/assets/4.env.html.cbc88455.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.5f10aed8.js"><link rel="prefetch" href="/web-vue3/assets/6.layout.html.a10daefc.js"><link rel="prefetch" href="/web-vue3/assets/7.single.html.219c836f.js"><link rel="prefetch" href="/web-vue3/assets/8.page.html.b3c49e49.js"><link rel="prefetch" href="/web-vue3/assets/9.module.html.4c3286a6.js"><link rel="prefetch" href="/web-vue3/assets/1.config.html.2a4538e9.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.81bb3b21.js"><link rel="prefetch" href="/web-vue3/assets/10.server.html.059c54f3.js"><link rel="prefetch" href="/web-vue3/assets/11.pwa.html.07fed650.js"><link rel="prefetch" href="/web-vue3/assets/12.upload.html.f72eb3e2.js"><link rel="prefetch" href="/web-vue3/assets/13.video.html.aad1b8fa.js"><link rel="prefetch" href="/web-vue3/assets/2.skill.html.dd4f5f0a.js"><link rel="prefetch" href="/web-vue3/assets/3.login.html.378bd3ae.js"><link rel="prefetch" href="/web-vue3/assets/4.projectMonitor.html.7aa0cb67.js"><link rel="prefetch" href="/web-vue3/assets/5.test.html.c5829504.js"><link rel="prefetch" href="/web-vue3/assets/6.configurePrem.html.d6c72520.js"><link rel="prefetch" href="/web-vue3/assets/7.internationalization.html.c8f72201.js"><link rel="prefetch" href="/web-vue3/assets/8.errorCollection.html.ca7c565a.js"><link rel="prefetch" href="/web-vue3/assets/9.optimize.html.0e83f57e.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.8cf7453e.js"><link rel="prefetch" href="/web-vue3/assets/1.vue-cli3.html.e5658eb9.js"><link rel="prefetch" href="/web-vue3/assets/2.life.html.41aa083b.js"><link rel="prefetch" href="/web-vue3/assets/2.vue.html.52c483ae.js"><link rel="prefetch" href="/web-vue3/assets/2.vue1.html.0641550a.js"><link rel="prefetch" href="/web-vue3/assets/3.vue-router.html.0c1845f9.js"><link rel="prefetch" href="/web-vue3/assets/4.vuex.html.4987b04b.js"><link rel="prefetch" href="/web-vue3/assets/5.ui.html.e8e48718.js"><link rel="prefetch" href="/web-vue3/assets/6.vueuse.html.cea3127a.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.15fea6eb.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa.html.3ed2f2e2.js"><link rel="prefetch" href="/web-vue3/assets/1.singlespa2.html.324f7a4c.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun.html.dcb95026.js"><link rel="prefetch" href="/web-vue3/assets/2.qiankun2.html.2a0a007a.js"><link rel="prefetch" href="/web-vue3/assets/3.share.html.bcf44c42.js"><link rel="prefetch" href="/web-vue3/assets/4.dev.html.1c0401c5.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.e989b7e6.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.52c90df3.js"><link rel="prefetch" href="/web-vue3/assets/10.infer.html.06d01233.js"><link rel="prefetch" href="/web-vue3/assets/11.overlapping.html.f966b41a.js"><link rel="prefetch" href="/web-vue3/assets/12.condition.html.f64504a1.js"><link rel="prefetch" href="/web-vue3/assets/13.builtin.html.80695410.js"><link rel="prefetch" href="/web-vue3/assets/14.package.html.066def34.js"><link rel="prefetch" href="/web-vue3/assets/15.custom.html.03e5fe47.js"><link rel="prefetch" href="/web-vue3/assets/16.unknown.html.592bb2c1.js"><link rel="prefetch" href="/web-vue3/assets/17.module.html.d2802e50.js"><link rel="prefetch" href="/web-vue3/assets/18.statement.html.1152e2f8.js"><link rel="prefetch" href="/web-vue3/assets/19.extend.html.5d3ea4c0.js"><link rel="prefetch" href="/web-vue3/assets/2.base.html.79a9b9c4.js"><link rel="prefetch" href="/web-vue3/assets/3.deduction.html.a69418e9.js"><link rel="prefetch" href="/web-vue3/assets/4.type.html.94420ddd.js"><link rel="prefetch" href="/web-vue3/assets/5.class.html.bc7f61ef.js"><link rel="prefetch" href="/web-vue3/assets/6.interface.html.56d3e083.js"><link rel="prefetch" href="/web-vue3/assets/7.generic.html.9ac50bb5.js"><link rel="prefetch" href="/web-vue3/assets/8.compatible.html.3f4ea154.js"><link rel="prefetch" href="/web-vue3/assets/9.protect.html.b2795aed.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d9966d86.js"><link rel="prefetch" href="/web-vue3/assets/1.local.html.4df5b3e1.js"><link rel="prefetch" href="/web-vue3/assets/2.gitlab.html.4053a02f.js"><link rel="prefetch" href="/web-vue3/assets/3.genkins.html.9cc6d40c.js"><link rel="prefetch" href="/web-vue3/assets/4.centos.html.982ee507.js"><link rel="prefetch" href="/web-vue3/assets/5.nginx.html.0a32d507.js"><link rel="prefetch" href="/web-vue3/assets/1.button.html.95c60e73.js"><link rel="prefetch" href="/web-vue3/assets/1.env.html.20885c7e.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.de1b877a.js"><link rel="prefetch" href="/web-vue3/assets/1.recursion.html.0253eb5f.js"><link rel="prefetch" href="/web-vue3/assets/10.tree.html.ad6a48b5.js"><link rel="prefetch" href="/web-vue3/assets/13.publish.html.9bba74e4.js"><link rel="prefetch" href="/web-vue3/assets/2.dropdown.html.82f86b4a.js"><link rel="prefetch" href="/web-vue3/assets/3.dialog.html.d5db7aa7.js"><link rel="prefetch" href="/web-vue3/assets/3.form.html.1379da1c.js"><link rel="prefetch" href="/web-vue3/assets/4.input.html.40804795.js"><link rel="prefetch" href="/web-vue3/assets/4.render.html.6e84844c.js"><link rel="prefetch" href="/web-vue3/assets/5.checkBox.html.da3c2254.js"><link rel="prefetch" href="/web-vue3/assets/6.cascader.html.432f5bc3.js"><link rel="prefetch" href="/web-vue3/assets/7.date.html.59c8c38f.js"><link rel="prefetch" href="/web-vue3/assets/8.dispaly.html.8ee5c8ea.js"><link rel="prefetch" href="/web-vue3/assets/9.alert.html.90100b92.js"><link rel="prefetch" href="/web-vue3/assets/9.dynamics.html.f74e3282.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.9a606624.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.d0e61b08.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.ecb82c00.js"><link rel="prefetch" href="/web-vue3/assets/10.optimize.html.8fab6090.js"><link rel="prefetch" href="/web-vue3/assets/11.gencode.html.0a1bdbcf.js"><link rel="prefetch" href="/web-vue3/assets/12.mount.html.b699c425.js"><link rel="prefetch" href="/web-vue3/assets/13._render.html.7a6aa852.js"><link rel="prefetch" href="/web-vue3/assets/14._update.html.99415da3.js"><link rel="prefetch" href="/web-vue3/assets/2.initGlobalAPI.html.ceb1f87b.js"><link rel="prefetch" href="/web-vue3/assets/3.initMixin.html.7015a932.js"><link rel="prefetch" href="/web-vue3/assets/4.stateMixin.html.c2406535.js"><link rel="prefetch" href="/web-vue3/assets/5.eventsMixin.html.c23ab67f.js"><link rel="prefetch" href="/web-vue3/assets/6.lifecycleMixin.html.167946fb.js"><link rel="prefetch" href="/web-vue3/assets/7.renderMixin.html.414350af.js"><link rel="prefetch" href="/web-vue3/assets/8.mount.html.baeba562.js"><link rel="prefetch" href="/web-vue3/assets/9.ast.html.5c18e82d.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.365131aa.js"><link rel="prefetch" href="/web-vue3/assets/2.use.html.53555ad6.js"><link rel="prefetch" href="/web-vue3/assets/3.origin.html.7011300f.js"><link rel="prefetch" href="/web-vue3/assets/1.index.html.c8cb6073.js"><link rel="prefetch" href="/web-vue3/assets/404.html.1820d32f.js">
    <link rel="stylesheet" href="/web-vue3/assets/style.935d4578.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/web-vue3/" class=""><!----><span class="site-name">Vue3.x学习笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/base/engine/1.index" class="" aria-label="一.Vue 的工程化"><!--[--><!--]--> 一.Vue 的工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/project/1.index" class="" aria-label="二.Vue 功能模块"><!--[--><!--]--> 二.Vue 功能模块 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/vue3.x/1.index" class="" aria-label="三.Vue 3.x全家桶"><!--[--><!--]--> 三.Vue 3.x全家桶 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/senior/2.typescript/1.index" class="" aria-label="一.TypeScript"><!--[--><!--]--> 一.TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/3.deploy/1.index" class="" aria-label="二.构建部署"><!--[--><!--]--> 二.构建部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/4.component/1.index" class="" aria-label="三.组件开发"><!--[--><!--]--> 三.组件开发 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-cli3.x/1.index" class="" aria-label="一.Vue/cli3.x"><!--[--><!--]--> 一.Vue/cli3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue3.x/1.index" class="" aria-label="二.Vue 3.x"><!--[--><!--]--> 二.Vue 3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-router4.x/1.index" class="" aria-label="三.Vue-Router4.x"><!--[--><!--]--> 三.Vue-Router4.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vuex4.x/1.index" class="" aria-label="四.Vuex4.x"><!--[--><!--]--> 四.Vuex4.x <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/web-vue3/read" class="" aria-label="Vue资料"><!--[--><!--]--> Vue资料 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础知识"><span class="title">基础知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/base/engine/1.index" class="" aria-label="一.Vue 的工程化"><!--[--><!--]--> 一.Vue 的工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/project/1.index" class="" aria-label="二.Vue 功能模块"><!--[--><!--]--> 二.Vue 功能模块 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/base/vue3.x/1.index" class="" aria-label="三.Vue 3.x全家桶"><!--[--><!--]--> 三.Vue 3.x全家桶 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="高级知识"><span class="title">高级知识</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/senior/2.typescript/1.index" class="" aria-label="一.TypeScript"><!--[--><!--]--> 一.TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/3.deploy/1.index" class="" aria-label="二.构建部署"><!--[--><!--]--> 二.构建部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/senior/4.component/1.index" class="" aria-label="三.组件开发"><!--[--><!--]--> 三.组件开发 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue 3.x源码"><span class="title">Vue 3.x源码</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-cli3.x/1.index" class="" aria-label="一.Vue/cli3.x"><!--[--><!--]--> 一.Vue/cli3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue3.x/1.index" class="" aria-label="二.Vue 3.x"><!--[--><!--]--> 二.Vue 3.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vue-router4.x/1.index" class="" aria-label="三.Vue-Router4.x"><!--[--><!--]--> 三.Vue-Router4.x <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web-vue3/source/vuex4.x/1.index" class="" aria-label="四.Vuex4.x"><!--[--><!--]--> 四.Vuex4.x <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/web-vue3/read" class="" aria-label="Vue资料"><!--[--><!--]--> Vue资料 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/web-vue3/senior/4.component/1.index.html" class="sidebar-item sidebar-heading" aria-label="Vue的组件开发"><!--[--><!--]--> Vue的组件开发 <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/1.button.html" class="sidebar-item sidebar-heading" aria-label="一.命令输入（按钮）"><!--[--><!--]--> 一.命令输入（按钮） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/2.dropdown.html" class="sidebar-item sidebar-heading" aria-label="一.命令输入（下拉菜单）"><!--[--><!--]--> 一.命令输入（下拉菜单） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/3.form.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（表单）"><!--[--><!--]--> 二.数据输入（表单） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/4.input.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（输入框）"><!--[--><!--]--> 二.数据输入（输入框） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/5.checkBox.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（单/复选框）"><!--[--><!--]--> 二.数据输入（单/复选框） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/6.cascader.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（级联选择）"><!--[--><!--]--> 二.数据输入（级联选择） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/7.date.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（日期）"><!--[--><!--]--> 二.数据输入（日期） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/8.dispaly.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（动态渲染）"><!--[--><!--]--> 二.数据输入（动态渲染） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/9.dynamics.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（动态）"><!--[--><!--]--> 二.数据输入（动态） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/1.env.html" class="sidebar-item sidebar-heading" aria-label="二.数据输入（富文本）"><!--[--><!--]--> 二.数据输入（富文本） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/10.tree.html" class="sidebar-item sidebar-heading" aria-label="三.数据输出（树）"><!--[--><!--]--> 三.数据输出（树） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/senior/4.component/12.table.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="三.数据输出（表格）"><!--[--><!--]--> 三.数据输出（表格） <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web-vue3/senior/4.component/12.table.html#_1-目录结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.目录结构"><!--[--><!--]--> 1.目录结构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/senior/4.component/12.table.html#_1-render-表格组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.Render 表格组件"><!--[--><!--]--> 1.Render 表格组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/senior/4.component/12.table.html#_2-方案一" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.方案一"><!--[--><!--]--> 2.方案一 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/senior/4.component/12.table.html#_3-方案二" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.方案二"><!--[--><!--]--> 3.方案二 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web-vue3/senior/4.component/12.table.html#_4-方案三" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.方案三"><!--[--><!--]--> 4.方案三 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/web-vue3/senior/4.component/1.recursion.html" class="sidebar-item sidebar-heading" aria-label="六.导航（菜单）"><!--[--><!--]--> 六.导航（菜单） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/3.dialog.html" class="sidebar-item sidebar-heading" aria-label="七.特殊窗口（对话框）"><!--[--><!--]--> 七.特殊窗口（对话框） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/4.render.html" class="sidebar-item sidebar-heading" aria-label="五.render"><!--[--><!--]--> 五.render <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/9.alert.html" class="sidebar-item sidebar-heading" aria-label="七.特殊窗口（警告提示）"><!--[--><!--]--> 七.特殊窗口（警告提示） <!--[--><!--]--></a><!----></li><li><a href="/web-vue3/senior/4.component/13.publish.html" class="sidebar-item sidebar-heading" aria-label="十三.组件发布"><!--[--><!--]--> 十三.组件发布 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="三-数据输出-表格" tabindex="-1"><a class="header-anchor" href="#三-数据输出-表格" aria-hidden="true">#</a> 三.数据输出（表格）</h1><div class="custom-container tip"><p class="custom-container-title">前言 --&gt; 表格组件特点</p><ul><li>下拉菜单组件应该由两部分组成： <ul><li>表头</li><li>数据展示部分</li></ul></li><li>它的主要功能包括： <ul><li>数据展示部分也可以嵌入基本组件，也可以使用自定义组件</li><li>由<code>&lt;table&gt;</code>、<code>&lt;thead&gt;</code>、<code>&lt;tbody&gt;</code>、<code>&lt;tr&gt;</code>、<code>th</code>、<code>td</code>这些标签组成，一般分为表头<strong>columns</strong>和数据<strong>data</strong>.</li></ul></li></ul></div><h2 id="_1-目录结构" tabindex="-1"><a class="header-anchor" href="#_1-目录结构" aria-hidden="true">#</a> 1.目录结构</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">├── table</span></span>
<span class="line"><span style="color:#24292F;">│   ├── TableRender.vue</span></span>
<span class="line"><span style="color:#24292F;">│   ├── render.js</span></span>
<span class="line"><span style="color:#24292F;">│   ├── pages</span></span>
<span class="line"><span style="color:#24292F;">│   └── index.js</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-render-表格组件" tabindex="-1"><a class="header-anchor" href="#_1-render-表格组件" aria-hidden="true">#</a> 1.Render 表格组件</h2><details class="custom-container details"><summary>先将基础表格封装成一个组件</summary><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">&lt;!-- src/components/table/TableRender.vue --&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">th</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">(col, i) </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">key</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">i</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;{{ col.title }}&lt;/</span><span style="color:#116329;">th</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">(row, i) </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> data</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">key</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">i</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">td</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">(col, j) </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">key</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">j</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;{{ row[col.key] }}&lt;/</span><span style="color:#116329;">td</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">props: {</span></span>
<span class="line"><span style="color:#24292F;">    columns: {</span></span>
<span class="line"><span style="color:#24292F;">      type: </span><span style="color:#0550AE;">Array</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">default</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> [],</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    data: {</span></span>
<span class="line"><span style="color:#24292F;">      type: </span><span style="color:#0550AE;">Array</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">default</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> [],</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#116329;">table</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">width</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">100</span><span style="color:#CF222E;">%</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">border-collapse</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">collapse</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">border-spacing</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">empty-cells</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">show</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">border</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">1</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">solid</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">#e9e9e9</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#116329;">table</span><span style="color:#24292F;"> </span><span style="color:#116329;">th</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">background</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">#f7f7f7</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">color</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">#5c6b77</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">font-weight</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">600</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">white-space</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">nowrap</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#116329;">table</span><span style="color:#24292F;"> </span><span style="color:#116329;">td</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#116329;">table</span><span style="color:#24292F;"> </span><span style="color:#116329;">th</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">padding</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">8</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">16</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">border</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">1</span><span style="color:#CF222E;">px</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">solid</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">#e9e9e9</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">text-align</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">left</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="custom-container warning"><p class="custom-container-title">组件的封装--&gt;使用</p><ul><li><p>可以看到一个纯文本显示的表格组件已经封装好了</p></li><li><p>现在有些地方需要用一些额外的逻辑（如生日）修改显示的效果，这里可以使用 render 函数来实现</p></li></ul></div><ul><li><p>Render 自定义列模板</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// src/components/table/render.js</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">functional: </span><span style="color:#0550AE;">true</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">props: {</span></span>
<span class="line"><span style="color:#24292F;">    row: </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    column: </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    index: Numner,</span></span>
<span class="line"><span style="color:#24292F;">    render: </span><span style="color:#0550AE;">Function</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, </span><span style="color:#953800;">ctx</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">params</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      row: ctx.props.row,</span></span>
<span class="line"><span style="color:#24292F;">      column: ctx.props.column,</span></span>
<span class="line"><span style="color:#24292F;">      index: ctx.props.index,</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> ctx.props.</span><span style="color:#8250DF;">render</span><span style="color:#24292F;">(h, params)</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>render.js 定义了 4 个 props：</p><ul><li><strong>row</strong>：当前的数据</li><li><strong>column</strong>：当前列的数据</li><li><strong>index</strong>：当前是第几行</li><li><strong>render</strong>：具体的 render 函数内容 这里的<code>render</code>选项并没有渲染任何节点，而是直接返回 props 中定义的 render，并将 h 和当前的行、列、序号作为参数传递出去。然后在 table.vue 里就可以使用 render.js 组件：</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">// table.vue</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">th</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;{{ col.title }}&lt;/</span><span style="color:#116329;">th</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">(row, rowIndex) </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> data</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">td</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;&#39;render&#39;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> col</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">            &lt;</span><span style="color:#116329;">Render</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">row</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">row</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">column</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">index</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">rowIndex</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">render</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col.render</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">            &gt;&lt;/</span><span style="color:#116329;">Render</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt; {{ row[col.key] }}&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">td</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Render </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./render.js&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">components: { Render }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">props: {</span></span>
<span class="line"><span style="color:#24292F;">    columns: {</span></span>
<span class="line"><span style="color:#24292F;">      type: </span><span style="color:#0550AE;">Array</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">default</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> []</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    data: {</span></span>
<span class="line"><span style="color:#24292F;">      type: </span><span style="color:#0550AE;">Array</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">default</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> []</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果 columns 中的某一列配置了 render 字段，那就通过 render.js 完成自定义模板，否则以字符串形式渲染。比如对出生日期这列显示为标准的日期格式，可以这样定义 column:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">data</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      columns: [</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// ...</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;出生日期&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">data</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">Date</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">parseInt</span><span style="color:#24292F;">(row.birthday))</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">year</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getFullYear</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">month</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getMonth</span><span style="color:#24292F;">() </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">day</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getDate</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">birthday</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">`${</span><span style="color:#24292F;">year</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">month</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">day</span><span style="color:#0A3069;">}`</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&quot;span&quot;</span><span style="color:#24292F;">, birthday)</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      ],</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>需要注意的是，columns 里定义的 render，是有两个参数的，第一个是 createElement（即 h）,第二个是从 render.js 传过来的对象，它包含了当前行的数据（row）、当前列配置（column）、当前是第几行（index）,使用者可以基于这 3 个参数得到任意想要的结果。由于是自定义列，显示什么都是使用者决定的，因此在使用了 render 的 column 里可以不用谢字段<code>key</code>。</p><ul><li>修改当前行</li></ul><p>有了 render，Table 组件就已经完成了，剩余工作都是使用者来配置 columns 完成各种复杂的业务逻辑。</p><p><strong>操作</strong>这一列，默认是一个<strong>修改</strong>按钮，点击后，变为<strong>保存</strong>和<strong>取消</strong>两个按钮，同时本行其他各列都变为了输入框，并且初始值就是刚才单元格的数据。变为输入框后，可以任意修改单元格数据，点击保存按钮保存完整行数据，点击取消按钮，还原至修改前的数据。</p><p>当进入编辑状态时，每一列的输入框都要有一个临时的数据使用<code>v-model</code>双向绑定来响应修改，所以在 data 里再声明四个数据。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// table-render.vue</span></span>
<span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;">(){</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// ...</span></span>
<span class="line"><span style="color:#24292F;">      editName: </span><span style="color:#0A3069;">&#39;&#39;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第一列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editAge: </span><span style="color:#0A3069;">&#39;&#39;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第二列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editBirthday: </span><span style="color:#0A3069;">&#39;&#39;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">//第三列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editAddress: </span><span style="color:#0A3069;">&#39;&#39;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">//第四列输入框</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同时还要知道是在修改第几行的数据，所以再加上一个数据标识当前正在修改的行序号（从 0 开始）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// table-render.vue</span></span>
<span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;"> (){</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">// ...</span></span>
<span class="line"><span style="color:#24292F;">      editIndex: </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 当前聚焦的输入框的行数</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>editIndex</code>默认给了 -1，也就是一个不存在的行号，当点击修改按钮时，再将它置为正确的行号。我们先定义操作列的 render:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// table-render.vue</span></span>
<span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      columns: [</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">//  ...</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&#39;操作&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;">}) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#6E7781;">//  如果当前行是编辑状态，则渲染两个按钮</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">if</span><span style="color:#24292F;">( </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index) {</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> [</span></span>
<span class="line"><span style="color:#24292F;">                </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;button&#39;</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">                  on: {</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#8250DF;">click</span><span style="color:#24292F;"> :() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">                      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].name </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName</span></span>
<span class="line"><span style="color:#24292F;">                      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].age </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge</span></span>
<span class="line"><span style="color:#24292F;">                      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].birthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday</span></span>
<span class="line"><span style="color:#24292F;">                      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].address </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress</span></span>
<span class="line"><span style="color:#24292F;">                      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">                    }</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                },</span><span style="color:#0A3069;">&#39;保存&#39;</span><span style="color:#24292F;">),</span></span>
<span class="line"><span style="color:#24292F;">                </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;button&#39;</span><span style="color:#24292F;">,{</span></span>
<span class="line"><span style="color:#24292F;">                  style: {</span></span>
<span class="line"><span style="color:#24292F;">                    marginLeft: </span><span style="color:#0A3069;">&#39;6px&#39;</span></span>
<span class="line"><span style="color:#24292F;">                  },</span></span>
<span class="line"><span style="color:#24292F;">                  on: {</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#8250DF;">click</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">                      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">                    }</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                },</span><span style="color:#0A3069;">&#39;取消&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">              ]</span></span>
<span class="line"><span style="color:#24292F;">            }</span><span style="color:#CF222E;">else</span><span style="color:#24292F;">{ </span><span style="color:#6E7781;">// 当前行是默认状态，渲染为一个按钮</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;button&#39;</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">                on: {</span></span>
<span class="line"><span style="color:#24292F;">                  </span><span style="color:#8250DF;">click</span><span style="color:#24292F;">: () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.name</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.age</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.address</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.birthday</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> index</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                }</span></span>
<span class="line"><span style="color:#24292F;">              },</span><span style="color:#0A3069;">&#39;修改&#39;</span><span style="color:#24292F;">)</span></span>
<span class="line"><span style="color:#24292F;">            }</span></span>
<span class="line"><span style="color:#24292F;">          }</span></span>
<span class="line"><span style="color:#24292F;">        }</span></span>
<span class="line"><span style="color:#24292F;">      ]</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>render 里的<code>if/else</code>可以先看 else，因为默认是非编辑状态，也就是说<code>editIndex</code>还是-1,。当点击<strong>修改</strong>按钮时，把 render 中第二个参数<code>{row}</code>中的各列数据赋值给了之前在 data 中声明的 4 个数据，这样做是因为之后点击<strong>取消</strong>按钮时，editName 等值已经修改好了，还没有还原，所以在开启编辑状态的同时，初始化各输入框的值（当然也可以在取消时重置）。最后再把<code>editIndex</code>置为对应的行序号<code>{index}</code>,此时 render 的<code>if</code>条件<code>this.editIndex === index</code>为真，编辑列变为两个按钮，保存和取消。点击保存，直接修改表格源数据 data 中对应的各字段值，并将 editIndex 置为-1，退出编辑状态；点击取消，不保存源数据，直接退出编辑器。</p><p>除了编辑列，其他各数据列都有两种状态：</p><ul><li>1.当 editIndex 等于当前行号 index 时，呈现输入框状态</li><li>2.当 editIndex 不等于当前行号 index 时，呈现默认数据。</li></ul><p>以姓名为例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// table-render.vue</span></span>
<span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;">(){</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      columns :[</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">//  ...</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&#39;姓名&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          key: </span><span style="color:#0A3069;">&#39;name&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">,{ </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;">}) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> edit</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#6E7781;">// 当前行为聚焦时</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index){</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [</span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;input&#39;</span><span style="color:#24292F;">),{</span></span>
<span class="line"><span style="color:#24292F;">                domProps: {</span></span>
<span class="line"><span style="color:#24292F;">                  value: row.name</span></span>
<span class="line"><span style="color:#24292F;">                },</span></span>
<span class="line"><span style="color:#24292F;">                on: {</span></span>
<span class="line"><span style="color:#24292F;">                  </span><span style="color:#8250DF;">input</span><span style="color:#24292F;">:(</span><span style="color:#953800;">event</span><span style="color:#24292F;">)</span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> event.target.value</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                }</span></span>
<span class="line"><span style="color:#24292F;">              }]</span></span>
<span class="line"><span style="color:#24292F;">            }</span><span style="color:#CF222E;">else</span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.name</span></span>
<span class="line"><span style="color:#24292F;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;div&#39;</span><span style="color:#24292F;">, [</span></span>
<span class="line"><span style="color:#24292F;">              edit</span></span>
<span class="line"><span style="color:#24292F;">            ])</span></span>
<span class="line"><span style="color:#24292F;">          }</span></span>
<span class="line"><span style="color:#24292F;">        }</span></span>
<span class="line"><span style="color:#24292F;">      ]</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>变量<code>edit</code>根据 editIndex 呈现不同的节点，还是先看 else，直接显示了对应字段的数据。在聚焦是（this.editIndex === index）,渲染一个<code>input</code>输入框，初始值<code>value</code>通过 render 的<code>domProps</code>绑定了<code>row.name</code>（这里也可以绑定 editName）,并监听了 input 时间，将输入的内容，实时缓存在数据<code>editName</code>中，供保存使用。实际上，这里绑定的 value 和时间 input 就是语法糖<code>v-model</code>在 Render 函数中的写法，在 template 中，经常写作<code>&lt;input v-model=&quot;editName&quot;&gt;</code></p><p>其他列类似</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// table-render.vue，部分代码省略</span></span>
<span class="line"><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#8250DF;">data</span><span style="color:#24292F;"> () {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      columns: [</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// ...</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&#39;年龄&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          key: </span><span style="color:#0A3069;">&#39;age&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> edit;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#6E7781;">// 当前行为聚焦行时</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index) {</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [</span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;input&#39;</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">                domProps: {</span></span>
<span class="line"><span style="color:#24292F;">                  value: row.age</span></span>
<span class="line"><span style="color:#24292F;">                },</span></span>
<span class="line"><span style="color:#24292F;">                on: {</span></span>
<span class="line"><span style="color:#24292F;">                  </span><span style="color:#8250DF;">input</span><span style="color:#24292F;">: (</span><span style="color:#953800;">event</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> event.target.value;</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                }</span></span>
<span class="line"><span style="color:#24292F;">              })];</span></span>
<span class="line"><span style="color:#24292F;">            } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.age;</span></span>
<span class="line"><span style="color:#24292F;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;div&#39;</span><span style="color:#24292F;">, [</span></span>
<span class="line"><span style="color:#24292F;">              edit</span></span>
<span class="line"><span style="color:#24292F;">            ]);</span></span>
<span class="line"><span style="color:#24292F;">          }</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&#39;出生日期&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> edit;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#6E7781;">// 当前行为聚焦行时</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index) {</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [</span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;input&#39;</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">                domProps: {</span></span>
<span class="line"><span style="color:#24292F;">                  value: row.birthday</span></span>
<span class="line"><span style="color:#24292F;">                },</span></span>
<span class="line"><span style="color:#24292F;">                on: {</span></span>
<span class="line"><span style="color:#24292F;">                  </span><span style="color:#8250DF;">input</span><span style="color:#24292F;">: (</span><span style="color:#953800;">event</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> event.target.value;</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                }</span></span>
<span class="line"><span style="color:#24292F;">              })];</span></span>
<span class="line"><span style="color:#24292F;">            } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">date</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">Date</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">parseInt</span><span style="color:#24292F;">(row.birthday));</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">year</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getFullYear</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">month</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getMonth</span><span style="color:#24292F;">() </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">day</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getDate</span><span style="color:#24292F;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">`${</span><span style="color:#24292F;">year</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">month</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">day</span><span style="color:#0A3069;">}`</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;div&#39;</span><span style="color:#24292F;">, [</span></span>
<span class="line"><span style="color:#24292F;">              edit</span></span>
<span class="line"><span style="color:#24292F;">            ]);</span></span>
<span class="line"><span style="color:#24292F;">          }</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&#39;地址&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          key: </span><span style="color:#0A3069;">&#39;address&#39;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> edit;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#6E7781;">// 当前行为聚焦行时</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index) {</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [</span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;input&#39;</span><span style="color:#24292F;">, {</span></span>
<span class="line"><span style="color:#24292F;">                domProps: {</span></span>
<span class="line"><span style="color:#24292F;">                  value: row.address</span></span>
<span class="line"><span style="color:#24292F;">                },</span></span>
<span class="line"><span style="color:#24292F;">                on: {</span></span>
<span class="line"><span style="color:#24292F;">                  </span><span style="color:#8250DF;">input</span><span style="color:#24292F;">: (</span><span style="color:#953800;">event</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">                    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> event.target.value;</span></span>
<span class="line"><span style="color:#24292F;">                  }</span></span>
<span class="line"><span style="color:#24292F;">                }</span></span>
<span class="line"><span style="color:#24292F;">              })];</span></span>
<span class="line"><span style="color:#24292F;">            } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">              edit </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.address;</span></span>
<span class="line"><span style="color:#24292F;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span><span style="color:#0A3069;">&#39;div&#39;</span><span style="color:#24292F;">, [</span></span>
<span class="line"><span style="color:#24292F;">              edit</span></span>
<span class="line"><span style="color:#24292F;">            ]);</span></span>
<span class="line"><span style="color:#24292F;">          }</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      ]</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际上，很多 Vue.js 的开发难题，都可以用 Render 函数来解决，它比 template 模板更灵活，可以完全发挥 JavaScript 的编程能力，因此很多 JS 的开发思想可以借鉴。如果你习惯 JSX，那完全可以抛弃传统的 template 写法。</p><p>Render 虽好，但也有弊端，通过上面的示例可以发现，写出来的 VNode 对象时很难读的，维护性比 template 差。</p><h2 id="_2-方案一" tabindex="-1"><a class="header-anchor" href="#_2-方案一" aria-hidden="true">#</a> 2.方案一</h2><p>第一种方案，用最简单的 slot-scope 实现，同时兼容 Render 函数的旧用法。拷贝上一节的 Table 组件目录，更名为<code>table-slot</code>,同时也拷贝路由，更名为<code>table-slot.vue</code>。为了兼容旧的 Render 函数用法，在 columns 的列配置 column 中，新增一个字段<code>slot</code>来指定 slot-scope 的名称：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">&lt;!-- src/components/table-slot/table.vue --&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">th</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;{{ col.title }}&lt;/</span><span style="color:#116329;">th</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">(row, rowIndex) </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> data</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">td</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;&#39;render&#39;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> col</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">            &lt;</span><span style="color:#116329;">Render</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">row</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">row</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">column</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">index</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">rowIndex</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">render</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col.render</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">            &gt;</span></span>
<span class="line"><span style="color:#24292F;">            &lt;/</span><span style="color:#116329;">Render</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;&#39;slot&#39;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> col</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">            &lt;</span><span style="color:#116329;">slot</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">row</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">row</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">column</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">index</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">rowIndex</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">name</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col.slot</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">            &gt;&lt;/</span><span style="color:#116329;">slot</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row[col.key] }}&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">td</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>相比原先的文件，只在 <code>&#39;render&#39; in col</code> 的条件下新加了一个 <code>template</code> 的标签，如果使用者的 column 配置了 render 字段，就优先以 Render 函数渲染，然后再判断是否用 slot-scope 渲染。在定义的作用域 slot 中，将行数据 <code>row</code>、列数据 <code>column</code> 和第几行 <code>index</code> 作为 slot 的参数，并根据 column 中指定的 slot 字段值，动态设置了具名 <code>name</code>。使用者在配置 columns 时，只要指定了某一列的 slot，那就可以在 Table 组件中使用 slot-scope。我们以上一节的可编辑整行数据为例，用 slot-scope 的写法实现完全一样的效果：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">&lt;!-- src/views/table-slot.vue --&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">table-slot</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">columns</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">data</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">data</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;name&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editName</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row.name }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;age&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editAge</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row.age }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;birthday&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editBirthday</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ </span><span style="color:#8250DF;">getBirthday</span><span style="color:#24292F;">(row.birthday) }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;address&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editAddress</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row.address }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;action&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#8250DF;">handleSave</span><span style="color:#24292F;">(index)</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;保存&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;取消&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#8250DF;">handleEdit</span><span style="color:#24292F;">(row, index)</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;操作&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">table-slot</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> TableSlot </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;../components/table-slot/table.vue&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">components: { TableSlot }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">data</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      columns: [</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;姓名&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          slot: </span><span style="color:#0A3069;">&quot;name&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;年龄&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          slot: </span><span style="color:#0A3069;">&quot;age&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;出生日期&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          slot: </span><span style="color:#0A3069;">&quot;birthday&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;地址&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          slot: </span><span style="color:#0A3069;">&quot;address&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;操作&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          slot: </span><span style="color:#0A3069;">&quot;action&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      ],</span></span>
<span class="line"><span style="color:#24292F;">      data: [</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          name: </span><span style="color:#0A3069;">&quot;王小明&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          age: </span><span style="color:#0550AE;">18</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          birthday: </span><span style="color:#0A3069;">&quot;919526400000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          address: </span><span style="color:#0A3069;">&quot;北京市朝阳区芍药居&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          name: </span><span style="color:#0A3069;">&quot;张小刚&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          age: </span><span style="color:#0550AE;">25</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          birthday: </span><span style="color:#0A3069;">&quot;696096000000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          address: </span><span style="color:#0A3069;">&quot;北京市海淀区西二旗&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          name: </span><span style="color:#0A3069;">&quot;李小红&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          age: </span><span style="color:#0550AE;">30</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          birthday: </span><span style="color:#0A3069;">&quot;563472000000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          address: </span><span style="color:#0A3069;">&quot;上海市浦东新区世纪大道&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          name: </span><span style="color:#0A3069;">&quot;周小伟&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          age: </span><span style="color:#0550AE;">26</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          birthday: </span><span style="color:#0A3069;">&quot;687024000000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          address: </span><span style="color:#0A3069;">&quot;深圳市南山区深南大道&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      ],</span></span>
<span class="line"><span style="color:#24292F;">      editIndex: </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 当前聚焦的输入框的行数</span></span>
<span class="line"><span style="color:#24292F;">      editName: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第一列输入框，当然聚焦的输入框的输入内容，与 data 分离避免重构的闪烁</span></span>
<span class="line"><span style="color:#24292F;">      editAge: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第二列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editBirthday: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第三列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editAddress: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第四列输入框</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">handleEdit</span><span style="color:#24292F;">(</span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.name</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.age</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.address</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.birthday</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> index</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">handleSave</span><span style="color:#24292F;">(</span><span style="color:#953800;">index</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].name </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].age </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].birthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].address </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">getBirthday</span><span style="color:#24292F;">(</span><span style="color:#953800;">birthday</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">date</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">Date</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">parseInt</span><span style="color:#24292F;">(birthday))</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">year</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getFullYear</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">month</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getMonth</span><span style="color:#24292F;">() </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">day</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getDate</span><span style="color:#24292F;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">`${</span><span style="color:#24292F;">year</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">month</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">day</span><span style="color:#0A3069;">}`</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例中在 <code>&lt;table-slot&gt;</code> 内的每一个 <code>&lt;template&gt;</code> 就对应某一列的 slot-scope 模板，通过配置的 <code>slot</code> 字段，指定具名的 slot-scope。可以看到，基本是把 Render 函数还原成了 html 的写法，这样看起来直接多了，渲染效果是完全一样的。在 slot-scope 中，平时怎么写组件，这里就怎么写，Vue.js 所有的 API 都是可以直接使用的。</p><p>方案一是最优解，一般情况下，使用这种方案就可以了，其余两种方案是基于 Render 的。</p><h2 id="_3-方案二" tabindex="-1"><a class="header-anchor" href="#_3-方案二" aria-hidden="true">#</a> 3.方案二</h2><p>第二种方案，不需要修改原先的 Table 组件代码，只是在使用层面修改即可。先来看具体的使用代码，然后再做分析。注意，这里使用的 Table 组件，仍然是上一节 <code>src/components/table-render</code> 的组件，它只有 Render 函数，没有定义 slot-scope：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">&lt;!-- src/views/table-render.vue 的改写 --&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">table-render</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">ref</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;table&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">columns</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">data</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">data</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;name&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editName</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row.name }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;age&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editAge</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row.age }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;birthday&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editBirthday</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ </span><span style="color:#8250DF;">getBirthday</span><span style="color:#24292F;">(row.birthday) }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;address&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">input</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">type</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;text&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-model</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editAddress</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">span</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row.address }}&lt;/</span><span style="color:#116329;">span</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot-scope</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;{ row, index }&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">slot</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;action&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> index</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#8250DF;">handleSave</span><span style="color:#24292F;">(index)</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;保存&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;取消&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">button</span><span style="color:#24292F;"> @</span><span style="color:#0550AE;">click</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#8250DF;">handleEdit</span><span style="color:#24292F;">(row, index)</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;操作&lt;/</span><span style="color:#116329;">button</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">table-render</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> TableRender </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;../components/table-render/table.vue&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">components: { TableRender }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">data</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      columns: [</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;姓名&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs.table.$scopedSlots.</span><span style="color:#8250DF;">name</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">                row: row,</span></span>
<span class="line"><span style="color:#24292F;">                column: column,</span></span>
<span class="line"><span style="color:#24292F;">                index: index,</span></span>
<span class="line"><span style="color:#24292F;">              })</span></span>
<span class="line"><span style="color:#24292F;">            )</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;年龄&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs.table.$scopedSlots.</span><span style="color:#8250DF;">age</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">                row: row,</span></span>
<span class="line"><span style="color:#24292F;">                column: column,</span></span>
<span class="line"><span style="color:#24292F;">                index: index,</span></span>
<span class="line"><span style="color:#24292F;">              })</span></span>
<span class="line"><span style="color:#24292F;">            )</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;出生日期&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs.table.$scopedSlots.</span><span style="color:#8250DF;">birthday</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">                row: row,</span></span>
<span class="line"><span style="color:#24292F;">                column: column,</span></span>
<span class="line"><span style="color:#24292F;">                index: index,</span></span>
<span class="line"><span style="color:#24292F;">              })</span></span>
<span class="line"><span style="color:#24292F;">            )</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;地址&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs.table.$scopedSlots.</span><span style="color:#8250DF;">address</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">                row: row,</span></span>
<span class="line"><span style="color:#24292F;">                column: column,</span></span>
<span class="line"><span style="color:#24292F;">                index: index,</span></span>
<span class="line"><span style="color:#24292F;">              })</span></span>
<span class="line"><span style="color:#24292F;">            )</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">        {</span></span>
<span class="line"><span style="color:#24292F;">          title: </span><span style="color:#0A3069;">&quot;操作&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">          </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">              </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs.table.$scopedSlots.</span><span style="color:#8250DF;">action</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">                row: row,</span></span>
<span class="line"><span style="color:#24292F;">                column: column,</span></span>
<span class="line"><span style="color:#24292F;">                index: index,</span></span>
<span class="line"><span style="color:#24292F;">              })</span></span>
<span class="line"><span style="color:#24292F;">            )</span></span>
<span class="line"><span style="color:#24292F;">          },</span></span>
<span class="line"><span style="color:#24292F;">        },</span></span>
<span class="line"><span style="color:#24292F;">      ],</span></span>
<span class="line"><span style="color:#24292F;">      data: [],</span></span>
<span class="line"><span style="color:#24292F;">      editIndex: </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 当前聚焦的输入框的行数</span></span>
<span class="line"><span style="color:#24292F;">      editName: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第一列输入框，当然聚焦的输入框的输入内容，与 data 分离避免重构的闪烁</span></span>
<span class="line"><span style="color:#24292F;">      editAge: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第二列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editBirthday: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第三列输入框</span></span>
<span class="line"><span style="color:#24292F;">      editAddress: </span><span style="color:#0A3069;">&quot;&quot;</span><span style="color:#24292F;">, </span><span style="color:#6E7781;">// 第四列输入框</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">methods: {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">handleEdit</span><span style="color:#24292F;">(</span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.name</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.age</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.address</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> row.birthday</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> index</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">handleSave</span><span style="color:#24292F;">(</span><span style="color:#953800;">index</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].name </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editName</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].age </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAge</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].birthday </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editBirthday</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data[index].address </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editAddress</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.editIndex </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">getBirthday</span><span style="color:#24292F;">(</span><span style="color:#953800;">birthday</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">date</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">Date</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">parseInt</span><span style="color:#24292F;">(birthday))</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">year</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getFullYear</span><span style="color:#24292F;">()</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">month</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getMonth</span><span style="color:#24292F;">() </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">day</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> date.</span><span style="color:#8250DF;">getDate</span><span style="color:#24292F;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">`${</span><span style="color:#24292F;">year</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">month</span><span style="color:#0A3069;">}-${</span><span style="color:#24292F;">day</span><span style="color:#0A3069;">}`</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">mounted</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.data </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> [</span></span>
<span class="line"><span style="color:#24292F;">      {</span></span>
<span class="line"><span style="color:#24292F;">        name: </span><span style="color:#0A3069;">&quot;王小明&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        age: </span><span style="color:#0550AE;">18</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        birthday: </span><span style="color:#0A3069;">&quot;919526400000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        address: </span><span style="color:#0A3069;">&quot;北京市朝阳区芍药居&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      {</span></span>
<span class="line"><span style="color:#24292F;">        name: </span><span style="color:#0A3069;">&quot;张小刚&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        age: </span><span style="color:#0550AE;">25</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        birthday: </span><span style="color:#0A3069;">&quot;696096000000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        address: </span><span style="color:#0A3069;">&quot;北京市海淀区西二旗&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      {</span></span>
<span class="line"><span style="color:#24292F;">        name: </span><span style="color:#0A3069;">&quot;李小红&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        age: </span><span style="color:#0550AE;">30</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        birthday: </span><span style="color:#0A3069;">&quot;563472000000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        address: </span><span style="color:#0A3069;">&quot;上海市浦东新区世纪大道&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">      {</span></span>
<span class="line"><span style="color:#24292F;">        name: </span><span style="color:#0A3069;">&quot;周小伟&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        age: </span><span style="color:#0550AE;">26</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        birthday: </span><span style="color:#0A3069;">&quot;687024000000&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">        address: </span><span style="color:#0A3069;">&quot;深圳市南山区深南大道&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    ]</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 slot-scope 的使用上（即 template 的内容），与方案一是完全一致的，可以看到，在 column 的定义上，仍然使用了 render 字段，只不过每个 render 都渲染了一个 div 节点，而这个 div 的内容，是指定来在 <code>&lt;table-render&gt;</code> 中定义的 slot-scope：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#953800;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, { </span><span style="color:#953800;">row</span><span style="color:#24292F;">, </span><span style="color:#953800;">column</span><span style="color:#24292F;">, </span><span style="color:#953800;">index</span><span style="color:#24292F;"> }) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">.$refs.table.$scopedSlots.</span><span style="color:#8250DF;">name</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">      row: row,</span></span>
<span class="line"><span style="color:#24292F;">      column: column,</span></span>
<span class="line"><span style="color:#24292F;">      index: index,</span></span>
<span class="line"><span style="color:#24292F;">    })</span></span>
<span class="line"><span style="color:#24292F;">  )</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这正是 Render 函数灵活的一个体现，使用 <code>$scopedSlots</code> 可以访问 slot-scope，所以上面这段代码的意思是，name 这一列仍然是使用 Functional Render，只不过 Render 的是一个预先定义好的 slot-scope 模板。</p><p>有一点需要注意的是，示例中的 <code>data</code> 默认是空数组，而在 mounted 里才赋值的，是因为这样定义的 slot-scope，初始时读取 <code>this.$refs.table.$scopedSlots</code> 是读不到的，会报错，当没有数据时，也就不会去渲染，也就避免了报错。</p><p>这种方案虽然可行，但归根到底是一种 hack，不是非常推荐，之所以列出来，是为了对 Render 和 slot-scope 有进一步的认识。</p><h2 id="_4-方案三" tabindex="-1"><a class="header-anchor" href="#_4-方案三" aria-hidden="true">#</a> 4.方案三</h2><p>第 3 中方案的思路和第 2 种是一样的，它介于方案 1 与方案 2 之间。这种方案要修改 Table 组件代码，但是用例与方案 1 完全一致。</p><p>在方案 2 中，我们是通过修改用例使用 slot-scope 的，也就是说 Table 组件本身没有支持 slot-scope，是我们“强加”上去的，如果把强加的部分，集成到 Table 内，那对使用者就很友好了，同时也避免了初始化报错，不得不把 data 写在 mounted 的问题。</p><p>保持方案 1 的用例不变，修改 <code>src/components/table-render</code> 中的代码。为了同时兼容 Render 与 slot-scope，我们在 <code>table-render</code> 下新建一个 slot.js 的文件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">// src/components/table-render/slot.js</span></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">functional: </span><span style="color:#0550AE;">true</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">inject: [</span><span style="color:#0A3069;">&quot;tableRoot&quot;</span><span style="color:#24292F;">]</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">props: {</span></span>
<span class="line"><span style="color:#24292F;">    row: </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    column: </span><span style="color:#0550AE;">Object</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    index: </span><span style="color:#0550AE;">Number</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">render</span><span style="color:#24292F;">: (</span><span style="color:#953800;">h</span><span style="color:#24292F;">, </span><span style="color:#953800;">ctx</span><span style="color:#24292F;">) </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">h</span><span style="color:#24292F;">(</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#0A3069;">&quot;div&quot;</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      ctx.injections.tableRoot.$scopedSlots[ctx.props.column.slot]({</span></span>
<span class="line"><span style="color:#24292F;">        row: ctx.props.row,</span></span>
<span class="line"><span style="color:#24292F;">        column: ctx.props.column,</span></span>
<span class="line"><span style="color:#24292F;">        index: ctx.props.index,</span></span>
<span class="line"><span style="color:#24292F;">      })</span></span>
<span class="line"><span style="color:#24292F;">    )</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>它仍然是一个 Functional Render，使用 <code>inject</code> 注入了父级组件 table.vue（下文改写） 中提供的实例 <code>tableRoot</code>。在 render 里，也是通过方案 2 中使用 <code>$scopedSlots</code> 定义的 slot，不过这是在组件级别定义，对用户来说是透明的，只要按方案 1 的用例来写就可以了。</p><p>table.vue 也要做一点修改：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#6E7781;">&lt;!-- src/components/table-slot/table.vue 的改写，部分代码省略 --&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">th</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;{{ col.title }}&lt;/</span><span style="color:#116329;">th</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">thead</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">tr</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">(row, rowIndex) </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> data</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">td</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> columns</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;&#39;render&#39;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> col</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">            &lt;</span><span style="color:#116329;">Render</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">row</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">row</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">column</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">index</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">rowIndex</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">              :</span><span style="color:#0550AE;">render</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col.render</span><span style="color:#0A3069;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">            &gt;&lt;/</span><span style="color:#116329;">Render</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else-if</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;&#39;slot&#39;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> col</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">            &lt;</span><span style="color:#116329;">slot-scope</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">row</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">row</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">column</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">col</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">index</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">rowIndex</span><span style="color:#0A3069;">&quot;</span><span style="color:#24292F;">&gt;&lt;/</span><span style="color:#116329;">slot-scope</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">          &lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">v-else</span><span style="color:#24292F;">&gt;{{ row[col.key] }}&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;/</span><span style="color:#116329;">td</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">tr</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">tbody</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">table</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> Render </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./render.js&quot;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> SlotScope </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;./slot.js&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">export</span><span style="color:#953800;"> </span><span style="color:#CF222E;">default</span><span style="color:#953800;"> {</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">components: { Render, SlotScope }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#8250DF;">provide</span><span style="color:#953800;">() </span><span style="color:#24292F;">{</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">      tableRoot: </span><span style="color:#0550AE;">this</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">  </span><span style="color:#24292F;">props: {</span></span>
<span class="line"><span style="color:#24292F;">    columns: {</span></span>
<span class="line"><span style="color:#24292F;">      type: </span><span style="color:#0550AE;">Array</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">default</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> []</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">    data: {</span></span>
<span class="line"><span style="color:#24292F;">      type: </span><span style="color:#0550AE;">Array</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#8250DF;">default</span><span style="color:#24292F;">() {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> []</span></span>
<span class="line"><span style="color:#24292F;">      },</span></span>
<span class="line"><span style="color:#24292F;">    },</span></span>
<span class="line"><span style="color:#24292F;">  }</span><span style="color:#953800;">,</span></span>
<span class="line"><span style="color:#953800;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为 slot-scope 模板是写在 table.vue 中的（对使用者来说，相当于写在组件 <code>&lt;table-slot&gt;&lt;/table-slot&gt;</code> 之间），所以在 table.vue 中使用 provide 向下提供了 Table 的实例，这样在 slot.js 中就可以通过 inject 访问到它，继而通过 <code>$scopedSlots</code> 获取到 slot。需要注意的是，在 Functional Render 是没有 this 上下文的，都是通过 h 的第二个参数临时上下文 ctx 来访问 prop、inject 等的。</p><p>方案 3 也是推荐使用的，当 Table 的功能足够复杂，层级会嵌套的比较深，那时方案 1 的 slot 就不会定义在第一级组件中，中间可能会隔许多组件，slot 就要一层层中转，相比在任何地方都能直接使用的 Render 就要麻烦了。所以，如果你的组件层级简单，推荐用第一种方案；如果你的组件已经成型（某 API 基于 Render 函数），但一时间不方便支持 slot-scope，而使用者又想用，那就选方案 2；如果你的组件已经成型（某 API 基于 Render 函数），但组件层级复杂，要按方案 1 那样支持 slot-scope 可能改动较大，还有可能带来新的 bug，那就用方案 3，它不会破坏原有的任何内容，但会额外支持 slot-scope 用法，关键是改动简单。</p><div class="custom-container tip"><p class="custom-container-title">总结</p><p>通过对前端组件的分析，需要重点关注组件中易变性对组件封装的影响，它会对组件的可复用性、可扩展性产生很大影响</p></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhoubichuan@icloud.com">周必川</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/web-vue3/senior/4.component/10.tree.html" class="" aria-label="三.数据输出（树）"><!--[--><!--]--> 三.数据输出（树） <!--[--><!--]--></a></span><span class="next"><a href="/web-vue3/senior/4.component/1.recursion.html" class="" aria-label="六.导航（菜单）"><!--[--><!--]--> 六.导航（菜单） <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/web-vue3/assets/app.8390b8a1.js" defer></script>
  </body>
</html>
